var decay={},kaizoCookiesVer="v1.0";function replaceDesc(e,a){Game.Upgrades[e].baseDesc=a,Game.Upgrades[e].desc=a,Game.Upgrades[e].ddesc=a}function replaceAchievDesc(e,a){Game.Achievements[e].baseDesc=a,Game.Achievements[e].desc=a,Game.Achievements[e].ddesc=a}function addLoc(e){locStrings[e]=e}function auraDesc(e,a){addLoc(a),Game.dragonAuras[e].desc=loc(a)}function cookieChange(name,newPow){if(!Game.Upgrades[name])return!1;"function"!=typeof Game.Upgrades[name].power?Game.Upgrades[name].power=newPow:eval('Game.Upgrades["'+name+'"].power='+Game.Upgrades[name].power.toString().replace("var pow=2;","var pow="+newPow+";").replace(") pow=3;",") pow=1.5*"+newPow+";"));var flavorText=Game.Upgrades[name].desc.slice(Game.Upgrades[name].desc.indexOf("<q>"),Game.Upgrades[name].desc.length);Game.Upgrades[name].desc=loc("Cookie production multiplier <b>+%1%</b>.",newPow)+flavorText,Game.Upgrades[name].ddesc=loc("Cookie production multiplier <b>+%1%</b>.",newPow)+flavorText,Game.Upgrades[name].baseDesc=loc("Cookie production multiplier <b>+%1%</b>.",newPow)+flavorText}function getVer(e){if("v"!==e[0])return!1;e=(e=e.slice(1,e.length)).split(".");for(let a in e)e[a]=parseFloat(e[a]);return e}function isv(e){return("string"!=typeof e||!e.includes("NaN")&&!e.includes("undefined"))&&(!isNaN(e)&&void 0!==e)}function selectStatement(e,a,t){if(-1==a)return!1;var i=0;t&&(i=t);for(var o=!1,s=a,r=!1,n=!1,l=!1,c=function(){return r||n||l};;){"{"!=e[a]||c()||(o=!0,i++),"}"!=e[a]||c()||i--;var m=[!r&&!n&&!l,r&&!n&&!l,!r&&n&&!l,!r&&!n&&l];if("'"==e[a]&&m[0]&&(r=!0),"'"==e[a]&&m[1]&&(r=!1),'"'==e[a]&&m[0]&&(n=!0),'"'==e[a]&&m[2]&&(n=!1),"`"==e[a]&&m[0]&&(l=!0),"`"==e[a]&&m[3]&&(l=!1),i<=0&&o)break;if(a>=e.length)break;a++}return e.slice(s,a)+"}"}function geometricMean(e){var a=0,t=0;for(let i=0;i<e.length;i++)0!=e[i]&&(a+=Math.log(e[i]),t++);return a/=Math.max(1,t),Math.exp(a)}function avgColors(e,a){var t=0;for(let a in e)void 0!==e[a][3]?t+=e[a][3]:t+=1;if(0==t)return a?[0,0,0,0]:[0,0,0,1];var i=[0,0,0,0];for(let a in e)void 0!==e[a][3]?(i[0]+=e[a][0]*e[a][3],i[1]+=e[a][1]*e[a][3],i[2]+=e[a][2]*e[a][3],i[3]+=e[a][3]):(i[0]+=e[a][0],i[1]+=e[a][1],i[2]+=e[a][2],i[3]+=1);return[i[0]/t,i[1]/t,i[2]/t,a?Math.min(i[3],1):1]}function colorCycleFrame(e,a,t){return void 0===e[3]&&(e[3]=1),void 0===a[3]&&(a[3]=1),[e[0]*(1-t)+a[0]*t,e[1]*(1-t)+a[1]*t,e[2]*(1-t)+a[2]*t,e[3]*(1-t)+a[3]*t]}function allValues(e){if(!decay.DEBUG)return!1;var a="[DEBUGGING: "+e+"]";a+="\nCookies in bank: "+Game.cookies,a+="\nCBTA: "+Game.cookiesEarned,a+="\nCPS: "+Game.cookiesPs,a+="\nDecay general: "+decay.gen,a+="\nDecay momentum: "+decay.momentum,a+="\n[DEBUGGER OF "+e+" END]",console.log(a)}Game.styleSheets=null;for(let e in document.styleSheets)try{if(document.styleSheets[e].cssRules.length>500){Game.styleSheets=document.styleSheets[e];break}}catch(e){}function injectCSS(e,a){if(null===Game.styleSheets)return!1;void 0===a&&(a=Game.styleSheets.cssRules.length),Game.styleSheets.insertRule(e,a)}null===Game.styleSheets&&Game.Notify("Unable to inject CSS!","Something went wrong. Please contact the mod developers. ");let gp=Game.Objects["Wizard tower"].minigame,pp=Game.Objects.Temple.minigame,gap=Game.Objects.Farm.minigame;var grimoireUpdated=!1,gardenUpdated=!1,pantheonUpdated=!1;Game.registerMod("Kaizo Cookies",{init:function(){Game.Notify("Oh, so you think comp is too easy?","Good luck.<br>Also, look in options for this mod's settings!",[21,32],10,1),custImg=App?this.dir+"/img.png":"https://raw.githack.com/omaruvu/Kaizo-Cookie/main/modicons.png",Game.priceIncrease=1.1475,eval("Game.Notify="+Game.Notify.toString().replace("quick,noLog","quick,noLog,forceStay").replace("if (Game.prefs.notifs)","if (Game.prefs.notifs && (!forceStay))")),decay.mults=[];for(let e in Game.Objects)decay.mults.push(1);decay.mults.push(1),decay.gen=decay.mults[20],decay.incMult=.04,decay.min=.15,decay.momentum=1,decay.smoothMomentumFactor=.2,decay.momentumFactor=2,decay.momentumIncFactor=2.5,decay.halt=1,decay.haltOvertime=0,decay.haltOTLimit=10,decay.decHalt=1,decay.haltFactor=.35,decay.haltKeep=.3,decay.haltOTDec=.25,decay.haltOTEfficiency=.75,decay.haltTickingPow=.75,decay.haltToMomentumMult=.5,decay.momentumOnHaltBuffer=2,decay.momentumOnHaltLogFactor=2,decay.momentumOnHaltPowFactor=1.25,decay.wrinklerSpawnThreshold=.5,decay.wrinklerSpawnFactor=2.5,decay.wrinklerApproachFactor=2,decay.wrinklerApproachPow=.5,decay.wcPow=.25,decay.pastCapPow=.1,decay.bankedPurification=0,decay.times={sinceLastPurify:100,sincePledgeEnd:100,sinceLastAmplify:200,sinceLastHalt:100},decay.buffDurPow=.5,decay.purifyMomentumMult=2,decay.haltReverseMomentumFactor=.985,decay.haltSubtractMomentum=1e6,decay.cpsList=[],decay.exemptBuffs=["clot","building debuff","loan 1 interest","loan 2 interest","loan 3 interest","gifted out","haggler misery","pixie misery","stagnant body"],decay.gcBuffs=["frenzy","click frenzy","dragonflight","dragon harvest","building buff","blood frenzy","cookie storm"],decay.justMult=0,decay.infReached=!1,decay.unlocked=!1,Game.cookiesEarned>1e3&&(decay.unlocked=!0),decay.DEBUG=!1,decay.prefs={ascendOnInf:1,wipeOnInf:0,preventNotifs:{initiate:0,achievement:0,purity:0,wrinkler:0,wrath:0,gpoc:0,decayII:0,veil:0,buff:0,multipleBuffs:0,fthof:0,purityCap:0,buildVariance:0,momentum:0,boost:0,autoclicker:0,garden:0,momentumPlus:0},widget:0},decay.update=function(e,a){if(Game.Has("Purity vaccines"))return decay.mults[e];var t=decay.mults[e];return t*=Math.pow(Math.pow(1-(1-Math.pow(1-decay.incMult/Game.fps,Math.max(1-t,decay.min))),Math.max(1,Math.pow(t,Game.Has("Unshackled Purity")?.9:1.2))-Math.min(Math.pow(decay.halt+decay.haltOvertime*decay.haltOTEfficiency,decay.haltFactor),1)/Math.pow(1+Math.log(Math.max(1,decay.momentum-decay.momentumOnHaltBuffer))/Math.log(decay.momentumOnHaltLogFactor),decay.momentumOnHaltPowFactor)),a)},decay.updateAll=function(){if(Game.cookiesEarned<=5555)return decay.unlocked=!1,!1;decay.unlocked=!0,decay.momentum<1&&(decay.momentum=1);var e=decay.getTickspeed(),a=decay.update(20,e);if(!isFinite(1/a)&&!isNaN(a)){console.log("Infinity reached. decay mult: "+a);for(let e in decay.mults)decay.mults[e]=1/Number.MAX_VALUE;decay.infReached=!0}for(let e in decay.mults)decay.mults[e]=a;if(decay.regainAcc(),decay.momentum=decay.updateMomentum(decay.momentum),Game.recalculateGains=1,decay.cpsList.push(Game.unbuffedCps),decay.cpsList.length>1.5*Game.fps&&decay.cpsList.shift(),Game.pledgeT>0){var t=Game.getPledgeStrength();decay.purifyAll(t[0],t[1],t[2],"pledge")}Game.pledgeC>0&&(Game.pledgeC--,0==Game.pledgeC&&(Game.Lock("Elder Pledge"),Game.Unlock("Elder Pledge")));for(let e in decay.times)decay.times[e]++;decay.times.sinceLastPurify>30&&(decay.bankedPurification+=Game.auraMult("Fierce Hoarder")/(4*Game.fps*Math.pow(1+decay.bankedPurification,.5))),decay.gen=decay.mults[20],Game.updateVeil(),decay.infReached&&(decay.onInf(),decay.infReached=!1)},decay.draw=function(){decay.setWidget(),decay.updateStats()},decay.updateMomentum=function(e){if(Game.Has("Purity vaccines"))return e;var a=decay.getMomentumMult()*Math.pow(1+decay.incMult,5)*Math.pow(Math.max(decay.gen,1),Game.Has("Unshackled Purity")?.3:.4)/(20*Game.fps);return Game.pledgeT>0&&(a*=2),e+=Math.log2(e+1)*Math.pow(decay.haltToMomentumMult,Math.pow(decay.halt+decay.haltOvertime*decay.haltOTEfficiency,decay.haltFactor))/Math.log2(decay.momentumIncFactor)*a,Math.max(1,e)},decay.getTickspeed=function(){var e=1;if(e*=decay.getTickspeedMultFromMomentum(),e*=Game.eff("decayRate"),Game.veilOn()&&(e*=1-Game.getVeilBoost()),Game.hasGod){var a=Game.hasGod("asceticism");1==a?e*=.7:2==a?e*=.8:3==a&&(e*=.9)}return Game.Has("Elder Covenant")&&(e*=1.5),e*=Math.pow(1.5,Math.max(0,Game.gcBuffCount()-1)),Game.hasBuff("Storm of creation").arg1&&(e*=1-Game.hasBuff("Storm of creation").arg1),Game.hasBuff("Unending flow").arg1&&(e*=1-Game.hasBuff("Unending flow").arg1),Game.hasBuff("Stagnant body").arg1&&(e*=1+Game.hasBuff("Stagnant body").arg1),e},decay.getTickspeedMultFromMomentum=function(){return 1+Math.max(Math.log2(2*decay.momentum),1)/Math.log2(decay.momentumFactor)*(1-1/Math.pow(decay.momentum,decay.smoothMomentumFactor))},decay.getMomentumMult=function(){var e=1;if(e*=1-Math.pow(.9,Math.log10(Math.max(Game.cookiesEarned-1e6,1))),e*=Game.eff("decayMomentum"),Game.veilOn()&&(e*=1-Game.getVeilBoost()),Game.hasGod){var a=Game.hasGod("asceticism");1==a?e*=.7:2==a?e*=.8:3==a&&(e*=.9)}return Game.hasBuff("Devastation").arg2&&(e*=Game.hasBuff("Devastation").arg2),Game.Has("Elder Covenant")&&(e*=1.5),e*=Math.pow(2.5,Math.max(0,Game.gcBuffCount()-1)),Game.hasBuff("Storm of creation").arg1&&(e*=1-Game.hasBuff("Storm of creation").arg1),Game.hasBuff("Unending flow").arg1&&(e*=1-Game.hasBuff("Unending flow").arg1),Game.hasBuff("Stagnant body").arg1&&(e*=1+Game.hasBuff("Stagnant body").arg1),e},decay.purify=function(e,a,t,i,o){if(decay.mults[e]>=i){if(!o)return!1;a=1+(a-1)/Math.pow(decay.mults[e]/i,decay.pastCapPow)}if(o&&decay.mults[e]*a>=i&&!(decay.mults[e]>=i)&&(a/=i/decay.mults[e],decay.mults[e]=i,a=1+(a-1)/Math.pow(decay.mults[e]/i,decay.pastCapPow)),decay.mults[e]*=a,decay.mults[e]>=i&&!o)return decay.mults[e]=i,!0;decay.mults[e]<1&&(decay.mults[e]*=Math.pow(10,-Math.log10(decay.mults[e])*t)),decay.mults[e]>i&&!o&&(decay.mults[e]=i)},decay.purifyAll=function(e,a,t,i){void 0===i&&(i="");var o=!1;Game.Has("Unshackled Purity")&&(o=!0);for(let i in decay.mults)decay.purify(i,e+decay.bankedPurification,1-Math.pow(1/(1+decay.bankedPurification),.5)*(1-a),t*(1+decay.bankedPurification),o)&&decay.triggerNotif("purityCap");if(decay.bankedPurification*=.5,"pledge"!==i&&(decay.times.sinceLastPurify=0),Game.hasGod){var s=Game.hasGod("creation");1==s?Game.gainBuff("creation storm",4,.48):2==s?Game.gainBuff("creation storm",16,.24):3==s&&Game.gainBuff("creation storm",64,.12)}},decay.refresh=function(e,a){decay.mults[e]=Math.max(a,decay.mults[e])},decay.refreshAll=function(e){for(let a in decay.mults)decay.refresh(a,e);decay.momentum=1,decay.times.sinceLastPurify=0,Game.recalculateGains=1},decay.regainAcc=function(){var e=Math.pow(Math.max(decay.getTickspeed(),1),decay.haltTickingPow);decay.halt=Math.max(0,decay.halt-decay.decHalt*e/Game.fps),0==decay.halt?decay.haltOvertime=Math.max(0,decay.haltOvertime-decay.decHalt*e/Game.fps):decay.haltOvertime=Math.max(0,decay.haltOvertime-decay.decHalt*e*decay.haltOTDec/Game.fps)},decay.stop=function(e){decay.halt=e*Game.eff("haltPower"),decay.momentum=1+(decay.momentum-1)*Math.pow(decay.haltReverseMomentumFactor,Math.log2(Math.max(2*e,2)*Game.eff("haltPower"))),decay.momentum-=Math.log2(Math.max(2*e,2)*Game.eff("haltPower"))/decay.haltSubtractMomentum,decay.momentum<1&&(decay.momentum=1),decay.haltOvertime=Math.min(decay.halt*decay.haltOTLimit,decay.haltOvertime+decay.halt*decay.haltKeep),decay.times.sinceLastHalt=0},decay.amplify=function(e,a,t){decay.mults[e]*=Math.pow(10,-Math.abs(Math.log10(decay.mults[e])*t)),decay.mults[e]*=1/a},decay.amplifyAll=function(e,a){for(let t in decay.mults)decay.amplify(t,e,a);decay.times.sinceLastAmplify=0},decay.get=function(e){return decay.mults[e]},decay.onInf=function(){decay.prefs.wipeOnInf&&(Game.HardReset(2),decay.setRates()),decay.prefs.ascendOnInf&&(Game.cookiesEarned=0,Game.Ascend(1),Game.Notify("Infinite decay","Excess decay caused a forced ascension without gaining any prestige or heavenly chips.",[21,25],3600*Game.fps*24*365,!1,1))},decay.notifs={initiate:{title:"decay",desc:"Due to aging and corruption in your facilities, CpS continuously decreases over time. You can temporarily stop it from decreasing with certain actions, such as clicking the big cookie; or purify the decay's effects by, for example, clicking a Golden or Wrath cookie.<br>To compensate, you get a +700% CpS multiplier that very slowly, decreases over time.",icon:[3,1,custImg],pref:"decay.prefs.preventNotifs.initiate"},achievement:{title:"Achievements",desc:"Obtaining an achievement also purifies your decay by a very large amount.",icon:[5,6],pref:"decay.prefs.preventNotifs.achievement"},purity:{title:"Purity",desc:'If you can purify all of your decay, any extra purification power will be spent as an increase in CpS. The extra CpS (called "purity") acts as a sacrifical buffer for the decay; the more purity you have, the quicker the decay will be in eating through them.',icon:[2,1,custImg],pref:"decay.prefs.preventNotifs.purity"},wrinkler:{title:"Wrinklers",desc:"Wrinklers now spawn if you have a lot of decay, and approaches the cookie faster the more decay you have. They wither a very large amount of CpS each and loses cookies on pop, but if you manage to pop them before they reach the big cookie, your decay gets stopped for much longer than just clicking!<br>Also, the withering affects clicks, unlike in vanilla",icon:[19,8],pref:"decay.prefs.preventNotifs.wrinkler"},wrath:{title:"Wrath cookies",desc:"Wrath cookies now replaces Golden cookies according to the amount of decay you have when it spawns; the more decay you have, the more often it replaces Golden cookies. Luckily, it still purifies decay the same way as Golden cookies do.",icon:[15,5],pref:"decay.prefs.preventNotifs.wrath"},gpoc:{title:"Grandmapocalypse",desc:"The Grandmapocalypse, in the vanilla sense, no longer exists. It has been replaced by the decay mechanic. As well, all other Grandmapocalypse-related items now help you combat the decay.",icon:[27,11],pref:"decay.prefs.preventNotifs.gpoc"},decayII:{title:"decay: the return",desc:"The decay gets stronger as you progress through the game, but you also obtain more items to help you fight it as the game goes on. ",icon:[3,1,custImg],pref:"decay.prefs.preventNotifs.decayII"},veil:{title:"Shimmering Veil",desc:"While there is no sources to directly examine your Shimmering Veil's welldoing, you can infer its health from the brightness of the veil around the big cookie, as well as the particles swirling around it.",icon:[9,10],pref:"decay.prefs.preventNotifs.veil"},buff:{title:"Buffs under decay",desc:"Positive buffs now run out faster the more decay you have accumulated. Stay vigilant!<br>(This uses the current amount of decay, which means that any decay accumulated before the buff was obtained will also contribute to the buff running out faster)",icon:[22,6],pref:"decay.prefs.preventNotifs.buff"},multipleBuffs:{title:"Buff stacking",desc:"Stacking more than one Golden cookie buff slightly increases your rate of decay, but especially increases the decay's momentum.",icon:[23,6],pref:"decay.prefs.preventNotifs.multipleBuffs"},fthof:{title:"Force the Hand of Fate",desc:"Notice: Force the Hand of Fate has had two effects removed from its pool (namely, building special and elder frenzy). Successful casts also have a chance to yield clot, ruin, and cursed finger. Planners may not be accurate.<br>(Also, Golden cookies spawned by it does not purify decay.)",icon:[22,11],pref:"decay.prefs.preventNotifs.fthof"},purityCap:{title:"Purity limit",desc:"All methods of purification have a hard limit on how much purity they can apply. This limit varies per the method.<br>(Telling you this because you just reached a purity limit)",icon:[2,1,custImg],pref:"decay.prefs.preventNotifs.purityCap"},buildVariance:{title:"Building size",desc:"You might know that your amount of buildings affect decay, but did you know that the buildings' size affects it too? The more space that a building would take up lore-wise, the more decay it contributes.",icon:[2,6],pref:"decay.prefs.preventNotifs.buildVariance"},momentum:{title:"Decay momentum",desc:"If you don't do anything about the decay for a while, the rate of growth will start to slowly increase and your clicks will get less effective at stopping decay; this is momentum. Unlike decay itself, purifying decay CANNOT reverse momentum; however, halting decay such as via clicking the big cookie, can halt its growth and even (very slowly) reverse its momentum!",icon:[5,3,custImg],pref:"decay.prefs.preventNotifs.momentum"},boost:{title:"Purity boosts",desc:'Some upgrades decrease your decay, but not all decreases decrease the same thing! There are three main ways:<br>"Decay rate" - The amount of decay that gets generated per second<br>"Decay momentum" - The decay momentum, which increases the decay rate if the decay is left uninterrupted<br>"Decay propagation" - Decay rates AND decay momentum',icon:[20,7],pref:"decay.prefs.preventNotifs.boost"},autoclicker:{title:"Autoclickers",desc:"Please note: this mod is not balanced around autoclickers, and those will severely impact the intended experience. <br>If you are using an autoclicker and want to get the full experience, you should stop using them ASAP.",icon:[12,0],pref:"decay.prefs.preventNotifs.autoclicker"},garden:{title:"The garden",desc:"The garden has been sped up and most mutations are significantly more common; the rarer it is in vanilla, the more boost it got. In addition, many of the slower-to-grow plants have been sped up dramatically. Lastly, all soils now tick faster and the refill works differently.",icon:[2,18],pref:"decay.prefs.preventNotifs.garden"},momentumPlus:{title:"Too much momentum",desc:"Momentum not only increases your rate of decay, but also makes methods that normally stop it less effective! There's really no way around it - if you got this much momentum, the only way to recover control is to keep clicking the cookie or popping wrinklers until it dies down.",icon:[5,3,custImg],pref:"decay.prefs.preventNotifs.momentumPlus"}},decay.triggerNotif=function(key,bypass){return void 0===eval(decay.notifs[key].pref)?(console.log("Corresponding pref not found. Input: "+key),!1):!(eval(decay.notifs[key].pref)&&(void 0===bypass||!bypass))&&(!!decay.unlocked&&(Game.Notify(decay.notifs[key].title,decay.notifs[key].desc,decay.notifs[key].icon,1e21,!1,!0),void eval(decay.notifs[key].pref+"=1;")))},Game.buffCount=function(){var e=0;for(let a in Game.buffs)decay.exemptBuffs.includes(Game.buffs[a].type.name)||e++;return e},Game.gcBuffCount=function(){var e=0;for(let a in Game.buffs)decay.gcBuffs.includes(Game.buffs[a].type.name)&&e++;return e},decay.checkTriggerNotifs=function(){if(Game.drawT%10!=0)return!1;decay.unlocked&&decay.triggerNotif("initiate"),decay.gen>1.2&&decay.triggerNotif("purity"),decay.gen<=.5&&decay.triggerNotif("gpoc"),decay.incMult>=.04&&decay.triggerNotif("decayII"),Game.buffCount()&&decay.gen<=.5&&decay.triggerNotif("buff"),Game.gcBuffCount()>1&&decay.triggerNotif("multipleBuffs"),Game.Objects.Idleverse.amount>0&&Game.Objects["Cortex baker"].amount>0&&decay.triggerNotif("buildVariance"),decay.momentum>1.25&&decay.triggerNotif("momentum"),decay.momentum>7.5&&decay.triggerNotif("momentumPlus")},Game.registerHook("logic",decay.checkTriggerNotifs),Game.registerHook("draw",decay.draw),eval("Game.Win="+Game.Win.toString().replace("Game.recalculateGains=1;",'decay.triggerNotif("achievement"); Game.recalculateGains=1;')),eval('Game.shimmerTypes["golden"].popFunc='+Game.shimmerTypes.golden.popFunc.toString().replace("if (me.wrath) Game.Win('Wrath cookie');","if (me.wrath) { decay.triggerNotif('wrath'); Game.Win('Wrath cookie'); }")),allValues("decay init"),decay.term=function(e){return e>1?"purity":"decay"},decay.toggle=function(e,a,t,i,o){decay.prefs[e]?(l(a).innerHTML=i,decay.prefs[e]=0):(l(a).innerHTML=t,decay.prefs[e]=1),l(a).className="smallFancyButton prefButton option"+(decay.prefs[e]^o?"":" off")},decay.writePrefButton=function(e,a,t,i,o,s){s=s?1:0;return o||(o=""),o+="PlaySound('snd/tick.mp3');",'<a class="smallFancyButton prefButton option'+(decay.prefs[e]^s?"":" off")+'" id="'+a+'" '+Game.clickStr+"=\"decay.toggle('"+e+"','"+a+"','"+t+"','"+i+"','"+s+"');"+o+'">'+(decay.prefs[e]?t:i)+"</a>"},decay.writeInfoSnippetButton=function(prefName,button){return eval(decay.notifs[prefName].pref)?'<a class="smallFancyButton" id="'+button+'"'+Game.clickStr+"=\"decay.triggerNotif('"+prefName+"', true);\">"+decay.notifs[prefName].title+"</a><br>":""},addLoc("Ascend on infinite decay"),addLoc("Wipe save on infinite decay"),addLoc("Upon reaching infinite decay, ascend without gaining any prestige or heavenly chips"),addLoc("Informational widget"),addLoc("Widget below the big cookie that displays information without having to look into the stats menu."),addLoc("<b>none.</b><br>(You can see and replay information snippets you've collected throughout the game here. The first one occurs at 5,555 cookies baked this ascension.)"),decay.getPrefButtons=function(){var e="";e+=decay.writePrefButton("ascendOnInf","AscOnInfDecayButton",loc("Ascend on infinite decay")+" ON",loc("Ascend on infinite decay")+" OFF")+"<label>("+loc("Upon reaching infinite decay, ascend without gaining any prestige or heavenly chips")+")</label><br>",e+=decay.writePrefButton("wipeOnInf","WipeOnInfDecayButton",loc("Wipe save on infinite decay")+" ON",loc("Wipe save on infinite decay")+" OFF")+"<label>("+loc("Upon reaching infinite decay, wipe save")+")</label><br>",e+=decay.writePrefButton("widget","widgetButton",loc("Informational widget")+" ON",loc("Informational widget")+" OFF")+"<label>("+loc("Widget below the big cookie that displays information without having to look into the stats menu. (only works when decay is unlocked)")+")</label><br>",e+="Replay information snippets:<br>";var a="";for(let e in decay.notifs)a+=decay.writeInfoSnippetButton(e,e+" Button")+"";return""==a&&(a=loc("<b>none.</b><br>(You can see and replay information snippets you've collected throughout the game here. The first one occurs at 5,555 cookies baked this ascension.)")),e+a},eval("Game.UpdateMenu="+Game.UpdateMenu.toString().replace("rs; game will reload\")+')</label><br>'+","rs; game will reload\")+')</label><br>'+decay.getPrefButtons()+")),decay.getDec=function(){if(decay.cpsList.length<1.5*Game.fps)return"";var e=(100*(1-geometricMean(decay.cpsList.slice(.5*Game.fps,decay.cpsList.length))/decay.cpsList[0])).toFixed(2);return" ("+(e=e.includes("-")?e.replace("-","+"):"-"+e)+"%/s)"},eval("Game.Draw="+Game.Draw.toString().replace("ify(Game.cookiesPs*(1-Game.cpsSucked),1)+'</div>';","ify(Game.cookiesPs*(1-Game.cpsSucked),1)+decay.getDec()+'</div>';")),decay.diffStr=function(){if(!decay.unlocked)return"";var e="<b>CpS multiplier from "+decay.term(decay.gen)+": </b>";return decay.gen<1e-4?(e+="1 / ",e+=Beautify(1/decay.gen)):(decay.gen>1?(e+="<small>+</small>",e+=Beautify(100*(decay.gen-1),3)):(e+="<small>-</small>",e+=Beautify(100*(1-decay.gen),3)),e+="%"),e},addLoc("Decay rate multiplier from your momentum:"),decay.momentumStr=function(){if(!decay.unlocked)return"";var e="<b>"+loc("Decay rate multiplier from your momentum:")+"</b> x";return e+=Beautify(decay.getTickspeedMultFromMomentum(),3)},decay.effectStrs=function(e){var a=decay.gen;if(Array.isArray(e))for(let t in e)a=e[t](a,t);var t="";return a>1?(t+="<small>+</small>",t+=Beautify(100*(a-1),3),t+="%"):a>=1e-4?(t+="<small>-</small>",t+=Beautify(100*(1-a),3),t+="%"):(t+="1 / ",t+=Beautify(1/a)),t},eval("Game.UpdateMenu="+Game.UpdateMenu.toString().replace("(giftStr!=''?'<div class=\"listing\">'+giftStr+'</div>':'')+","(giftStr!=''?'<div class=\"listing\">'+giftStr+'</div>':'')+'<div id=\"decayMultD\" class=\"listing\">'+decay.diffStr()+'</div><div id=\"decayMomentumMultD\" class=\"listing\">'+decay.momentumStr()+'</div>'+").replace('\'<div class="listing"><b>\'+loc("Cookies per second:")','\'<div id="CpSD" class="listing"><b>\'+loc("Cookies per second:")').replace('\'<div class="listing"><b>\'+loc("Raw cookies per second:")','\'<div id="RawCpSD" class="listing"><b>\'+loc("Raw cookies per second:")').replace('\'<div class="listing"><b>\'+loc("Cookies per click:")','\'<div id="CpCD" class="listing"><b>\'+loc("Cookies per click:")')),Game.UpdateMenu(),decay.updateStats=function(){"stats"==Game.onMenu&&(document.getElementById("decayMultD").innerHTML=decay.diffStr(),document.getElementById("CpSD").innerHTML="<b>"+loc("Cookies per second:")+"</b> "+Beautify(Game.cookiesPs,1)+" <small>("+loc("multiplier:")+" "+Beautify(Math.round(100*Game.globalCpsMult),1)+"%)"+(Game.cpsSucked>0?' <span class="warning">('+loc("withered:")+" "+Beautify(Math.round(100*Game.cpsSucked),1)+"%</span>":"")+"</small>",document.getElementById("RawCpSD").innerHTML="<b>"+loc("Raw cookies per second:")+"</b> "+Beautify(Game.cookiesPsRaw,1)+" <small>("+loc("highest this ascension:")+" "+Beautify(Game.cookiesPsRawHighest,1)+")</small>",document.getElementById("CpCD").innerHTML="<b>"+loc("Cookies per click:")+"</b> "+Beautify(Game.computedMouseCps,1),document.getElementById("decayMomentumMultD").innerHTML=decay.momentumStr())};var newDiv=document.createElement("div");newDiv.id="decayWidget",injectCSS(".leftSectionWidget { font-size: 26px; text-shadow: rgb(0, 0, 0) 0px 1px 4px; position: relative; text-align: center; padding: 3px; display: inline-block; z-index: 6; left: 50%; transform: scale(0.75) translate(-66.7%, -133.3%); background: rgba(0, 0, 0, 0.4); line-height: 1.25; border-radius: 10px; }"),injectCSS(".widgetDisplay { position: relative; display:inline-flex; justify-content: center; align-items: center; width: 100%; margin: 4px 0px 4px 0px; }"),injectCSS(".widgetText { display: inline; margin: 4px 58px 4px 58px; }"),injectCSS(".widgetIcon { position: absolute; }"),injectCSS(".widgetIcon.toLeft { left: 0; }"),injectCSS(".widgetIcon.toRight { right: 0; }"),newDiv.classList.add("leftSectionWidget"),newDiv.style="top: 500px;",l("sectionLeft").appendChild(newDiv),decay.setWidget=function(){if(!decay.prefs.widget||!decay.unlocked)return l("decayWidget").style="display:none;",!1;var e="";e=decay.effectStrs(),l("decayCpsData").innerHTML=e,decay.gen>1?(l("decayRateIconLeft").style=writeIcon([2,1,custImg]),l("decayRateIconRight").style=writeIcon([2,1,custImg])):(l("decayRateIconLeft").style=writeIcon([3,1,custImg]),l("decayRateIconRight").style=writeIcon([3,1,custImg])),e="x"+Beautify(decay.getTickspeedMultFromMomentum(),3),l("decayMomentumData").innerHTML=e;var a=.95;"dragon"==Game.specialTab?a=.8:"santa"==Game.specialTab&&(a=.88),a=Math.max(a*l("sectionLeft").offsetHeight,250),l("decayWidget").style="top:"+a+"px"},addLoc("CpS multiplier from your decay"),addLoc("Decay rate multiplier from your momentum"),l("decayWidget").innerHTML='<div id="decayCpsMult" '+Game.getTooltip('<div style="width: 250px; text-align: center;">'+loc("CpS multiplier from your decay/purity")+"</div>","middle",!1)+' class="widgetDisplay"><div class="icon widgetIcon toLeft" id="decayRateIconLeft" style="'+writeIcon([3,1,custImg])+'"></div><div id="decayCpsData" class="widgetText">initializing...</div><div class="icon widgetIcon toRight" id="decayRateIconRight" style="'+writeIcon([3,1,custImg])+'"></div></div><br><div id="decayMomentum" '+Game.getTooltip('<div style="width: 250px; text-align: center;">'+loc("Decay rate multiplier from your momentum")+"</div>","middle",!1)+' class="widgetDisplay"><div class="icon widgetIcon toLeft" style="'+writeIcon([5,3,custImg])+'"></div><div id="decayMomentumData" class="widgetText">initializing...</div><div class="icon widgetIcon toRight" style="'+writeIcon([5,3,custImg])+'"></div></div>',decay.setRates=function(){var e=1,a=Game.cookiesEarned+1;e*=Math.pow(.99825,Math.log10(a)),e*=Math.pow(.999,Math.log2(Math.max(Game.goldenClicks-77,1))),e*=Math.pow(.99875,Math.max(Math.sqrt(Game.AchievementsOwned)-4,0)),e*=Math.pow(.99875,Math.max(Math.sqrt(Game.UpgradesOwned)-5,0)),e*=Math.pow(.99825,Math.max(Math.pow(decay.getBuildingContribution(),.33)-10,0)),e*=Math.pow(.998,Math.log2(Math.max(Game.lumpsTotal,1))),e*=Math.pow(.99825,Math.log10(Game.cookieClicks)),e*=Math.pow(.999,Math.pow(Game.dragonLevel,.6)),e*=Math.pow(.9999,Math.log2(Math.max(Date.now()-Game.startDate-1e5,1))),Game.Has("Lucky day")&&(e*=.995),Game.Has("Serendipity")&&(e*=.995),Game.Has("Get lucky")&&(e*=.995),Game.Has("One mind")&&(e*=.99),Game.Has("Shimmering veil")&&(e*=.99),Game.Has("Unshackled Purity")&&(e*=.985),decay.incMult=1-e;var t=1-.8;if(t*=Math.pow(.985,Math.log10(a)),decay.wrinklerSpawnFactor=2.5*Math.pow(5*t,5),Game.hasGod){var i=Game.hasGod("scorn");1==i?(decay.wrinklerSpawnThreshold=1-Math.pow(3*t,.25),decay.wcPow=.5):2==i?(decay.wrinklerSpawnThreshold=1-Math.pow(3*t,.33),decay.wcPow=.375):3==i?(decay.wrinklerSpawnThreshold=1-Math.pow(3*t,.5),decay.wcPow=.3):(decay.wrinklerSpawnThreshold=1-3*t,decay.wcPow=.25)}else decay.wrinklerSpawnThreshold=Math.pow(t,.25),decay.wcPow=.25;decay.min=Math.min(1,.15+3.5*(1-e));var o=1;o*=1/Math.pow(e,2),decay.decHalt=o,decay.buffDurPow=.5-.15*Game.auraMult("Epoch Manipulator")},decay.getBuildingContribution=function(){var e=0,a=0;Game.Has("Thousand fingers")&&(a+=Game.BuildingsOwned),Game.Has("Million fingers")&&(a*=5),Game.Has("Billion fingers")&&(a*=10),Game.Has("Trillion fingers")&&(a*=20),Game.Has("Quadrillion fingers")&&(a*=20),Game.Has("Quintillion fingers")&&(a*=20),Game.Has("Sextillion fingers")&&(a*=20),Game.Has("Septillion fingers")&&(a*=20),Game.Has("Octillion fingers")&&(a*=20),Game.Has("Nonillion fingers")&&(a*=20),Game.Has("Decillion fingers")&&(a*=20),Game.Has("Undecillion fingers")&&(a*=20),Game.Has("Unshackled cursors")&&(a*=25),e+=Math.log10(Math.max(a,10))*Game.Objects.Cursor.amount*.1;var t=1;return Game.Has("One mind")&&(t+=Game.Objects.Grandma.amount/100),Game.Has("Communal brainsweep")&&(t+=Game.Objects.Grandma.amount/100),Game.Has("Elder Pact")&&(t+=Game.Objects.Portal.amount/40),e+=t+Game.Objects.Grandma.amount,e+=3*Game.Objects.Farm.amount+3*Game.Objects.Mine.amount+1.5*Game.Objects.Factory.amount+1.25*Game.Objects.Bank.amount,e+=1.25*Game.Objects.Temple.amount+Game.Objects["Wizard tower"].amount+Game.Objects.Shipment.amount+Game.Objects["Alchemy lab"].amount,e+=Game.Objects.Portal.amount*(1+1.5*Game.Has("Deity-sized portals"))+Game.Objects["Time machine"].amount,e+=2.5*Game.Objects["Antimatter condenser"].amount+Game.Objects.Prism.amount+1.5*Game.Objects.Chancemaker.amount,e+=2.71828*Game.Objects["Fractal engine"].amount+Math.pow(Game.Objects["Javascript console"].amount,1.25),e+=20*Game.Objects.Idleverse.amount+12*Game.Objects["Cortex baker"].amount+Game.Objects.You.amount},decay.setRates(),Game.registerHook("check",decay.setRates);for(let i in Game.Objects)eval('Game.Objects["'+i+'"].buy='+Game.Objects[i].buy.toString().replace("if (this.buyFunction) this.buyFunction();","if (this.buyFunction) { this.buyFunction(); } decay.setRates();"));allValues("decay ui and scaling"),decay.cookiesPsAnim=function(){var e=[],a=Game.fps;if(decay.times.sinceLastPurify<3*a){var t=Math.pow(decay.times.sinceLastPurify/(3*a),.7);e.push(colorCycleFrame([51,255,68],[51,255,68,0],t))}if(Game.pledgeT>0){var i=Math.floor(Game.pledgeT/(2*a))+Math.pow(Game.pledgeT/(2*a)-Math.floor(Game.pledgeT/(2*a)),.5);Math.floor(i)%2?e.push(colorCycleFrame([51,255,68],[42,255,225],i-Math.floor(i))):e.push(colorCycleFrame([42,255,225],[51,255,68],i-Math.floor(i)))}if(decay.times.sincePledgeEnd<3*a){t=Math.pow(decay.times.sincePledgeEnd/(3*a),1.5);e.push(colorCycleFrame([51,255,68],[51,255,68,0],t))}if(decay.times.sinceLastAmplify<5*a){t=Math.pow(decay.times.sinceLastAmplify/(3*a),1.5);e.push(colorCycleFrame([119,30,143],[119,30,143,0],t))}if(Game.veilOn()&&0==Game.cpsSucked){i=Math.floor(Game.T/(10*a))+Math.pow(Game.T/(10*a)-Math.floor(Game.T/(10*a)),.33);Math.floor(i)%2?e.push(colorCycleFrame([255,236,69,0],[255,236,69,.66],i-Math.floor(i))):e.push(colorCycleFrame([255,236,69,.66],[255,236,69,0],i-Math.floor(i)))}var o=avgColors(e,!0);return o[3]<1&&(o=0==Game.cpsSucked?avgColors([o,[255,255,255,1-o[3]]],!1):avgColors([o,[255,0,0,1-o[3]]],!1)),e.length>0?"color: rgb("+o[0]+","+o[1]+","+o[2]+");":""},eval("Game.Draw="+Game.Draw.toString().replace("class=\"wrinkled\"':'')+'>'","class=\"wrinkled\"':'')+' style=\"'+decay.cookiesPsAnim()+'\">'")),Game.registerHook("logic",decay.updateAll);for(let i in Game.Objects)eval('Game.Objects["'+i+'"].cps='+Game.Objects[i].cps.toString().replace("CpsMult(me);","CpsMult(me); mult *= decay.get(me.id); "));function inRect(e,a,t){var i=e+Math.sin(-t.r)*-(t.h/2-t.o),o=a+Math.cos(-t.r)*-(t.h/2-t.o),s=Math.sqrt(i*i+o*o),r=Math.atan2(o,i)-t.r,n=Math.cos(r)*s,l=Math.sin(r)*s;return n>-.5*t.w&&n<.5*t.w&&l>-.5*t.h&&l<.5*t.h}eval("Game.CalculateGains="+Game.CalculateGains.toString().replace("{Game.cookiesPs+=9;Game.cookiesPsByType['\"egg\"']=9;}","{Game.cookiesPs+=9*decay.gen;Game.cookiesPsByType['\"egg\"']=9*decay.gen;}")),eval("Game.shimmerTypes['golden'].initFunc="+Game.shimmerTypes.golden.initFunc.toString().replace(" || (Game.elderWrath==1 && Math.random()<1/3) || (Game.elderWrath==2 && Math.random()<2/3) || (Game.elderWrath==3)",' || ((!Game.Has("Elder Covenant")) && Math.random() > Math.pow(decay.gen, decay.wcPow * Game.eff("wrathReplace")))')),addLoc("+%1/min"),Game.registerHook("check",(()=>{if(Game.Objects["Wizard tower"].minigameLoaded&&!grimoireUpdated){if(gp=Game.Objects["Wizard tower"].minigame,void 0===gp)return console.log("grimoire1 failed. gp: "+gp),!1;if(null===l("grimoireInfo"))return console.log("grimoire2 failed. grimoireInfo:"+l("grimoireInfo")),!1;if(void 0===gp.spells)return console.log("grimoire3 failed. gp.spells: "+gp.spells),!1;var M=gp;try{decay.addSpells(),Game.rebuildGrimoire()}catch(e){Game.Notify("adding spells failed!","uh oh",0,1e21,!1,!0)}eval("gp.logic="+gp.logic.toString().replace("M.magicPS=Math.max(0.002,Math.pow(M.magic/Math.max(M.magicM,100),0.5))*0.002;","M.magicPS = Math.pow(Math.min(2, decay.gen), 0.3) * Math.max(0.002,Math.pow(M.magic/Math.max(M.magicM,100),0.5))*0.006;")),eval("gp.logic="+replaceAll("M.","gp.",gp.logic.toString())),eval("gp.spells['summon crafty pixies'].desc=\""+Game.Objects["Wizard tower"].minigame.spells["summon crafty pixies"].desc.replace("2","10")+'"'),eval("gp.spells['spontaneous edifice'].win="+Game.Objects["Wizard tower"].minigame.spells["spontaneous edifice"].win.toString().replace("{if ((Game.Objects[i].amount<max || n==1) && Game.Objects[i].getPrice()<=Game.cookies*2 && Game.Objects[i].amount<400) buildings.push(Game.Objects[i]);}","{if ((Game.Objects[i].amount<max || n==1) && Game.Objects[i].getPrice()<=Game.cookies*2 && Game.Objects[i].amount<1000) buildings.push(Game.Objects[i]);}")),eval("gp.spells['spontaneous edifice'].desc=\""+Game.Objects["Wizard tower"].minigame.spells["spontaneous edifice"].desc.replace("400","1000")+'"'),eval("gp.draw="+gp.draw.toString().replace("Math.min(Math.floor(M.magicM),Beautify(M.magic))+'/'+Beautify(Math.floor(M.magicM))+(M.magic<M.magicM?(' ('+loc(\"+%1/s\",Beautify((M.magicPS||0)*Game.fps,2))+')'):'')","Math.min(Math.floor(M.magicM),Beautify(M.magic))+'/'+Beautify(Math.floor(M.magicM))+(M.magic<M.magicM?(' ('+loc(\"+%1/min\",Beautify((M.magicPS||0)*Game.fps*60,3))+')'):'')").replace('loc("Spells cast: %1 (total: %2)",[Beautify(M.spellsCast),Beautify(M.spellsCastTotal)]);','loc("Spells cast: %1 (total: %2)",[Beautify(M.spellsCast),Beautify(M.spellsCastTotal)]); M.infoL.innerHTML+="; Magic regen multiplier from "+decay.term(decay.gen)+": "+decay.effectStrs([function(n, i) { return Math.pow(Math.min(2, n), 0.3)}]); ')),eval("gp.draw="+replaceAll("M.","gp.",gp.draw.toString())),eval('gp.spells["hand of fate"].win='+gp.spells["hand of fate"].win.toString().replace("if (Game.BuildingsOwned>=10 && Math.random()<0.25) choices.push('building special');",'decay.triggerNotif("fthof");')),eval('gp.spells["hand of fate"].fail='+gp.spells["hand of fate"].fail.toString().replace("if (Math.random()<0.1) choices.push('cursed finger','blood frenzy');","if (Math.random()<0.1) choices.push('cursed finger'); decay.triggerNotif(\"fthof\");")),eval("gp.spellTooltip="+replaceAll("M.","gp.",gp.spellTooltip.toString())),eval("gp.spellTooltip="+gp.spellTooltip.toString().replace("background-position:'+(-me.icon[0]*48)+'px '+(-me.icon[1]*48)+'px;","'+writeIcon(me.icon)+'")),grimoireUpdated=!0,allValues("spells activated")}})),decay.wrinklerApproach=function(){var e=15/Math.pow(Game.eff("wrinklerApproach"),1.5);return e*=1+2*Game.auraMult("Dragon God"),Math.max(1,e/Math.pow(Math.log(1/Math.min(1,decay.gen))/Math.log(decay.wrinklerApproachFactor),decay.wrinklerApproachPow))},replaceDesc("Wrinkler doormat","Wrinklers no longer spawn.<q>Quite possibly the cleanest doormat one will ever see.</q>"),eval("Game.UpdateWrinklers="+Game.UpdateWrinklers.toString().replace("var chance=0.00001*Game.elderWrath;",'var chance=1 - Math.pow(0.9999, Math.log(1 / Math.min(1, decay.gen)) / Math.log(decay.wrinklerSpawnFactor)); if (decay.gen >= decay.wrinklerSpawnThreshold || !decay.unlocked || Game.Has("Wrinkler doormat")) { chance = 0; }').replace("if (Game.Has('Wrinkler doormat')) chance=0.1;","")),eval("Game.UpdateWrinklers="+Game.UpdateWrinklers.toString().replace("if (me.close<1) me.close+=(1/Game.fps)/10;","if (me.close<1) me.close+=(1/Game.fps)/(decay.wrinklerApproach());")),eval("Game.UpdateWrinklers="+Game.UpdateWrinklers.toString().replace("if (me.phase==0 && Game.elderWrath>0 && n<max && me.id<max)","if (me.phase==0 && n<max && me.id<max)")),eval("Game.UpdateWrinklers="+Game.UpdateWrinklers.toString().replace("me.sucked+=(((Game.cookiesPs/Game.fps)*Game.cpsSucked));//suck the cookies",'if (!Game.auraMult("Dragon Guts")) { me.sucked+=(Game.cpsSucked * 10 * Math.max(Game.cookiesPsRawHighest, Game.cookiesPs))/Game.fps; }')),addLoc("-%1!"),addLoc("You lost <b>%1</b>!"),eval("Game.UpdateWrinklers="+replaceAll("var godLvl=Game.hasGod('scorn');","var godLvl=0;",Game.UpdateWrinklers.toString())),eval("Game.UpdateWrinklers="+Game.UpdateWrinklers.toString().replace("Game.Earn(me.sucked);",'Game.cookies = Math.max(0, Game.cookies - me.sucked); if (me.sucked > 0.5) { decay.triggerNotif("wrinkler"); }').replace('Game.Notify(me.type==1?loc("Exploded a shiny wrinkler"):loc("Exploded a wrinkler"),loc("Found <b>%1</b>!",loc("%1 cookie",LBeautify(me.sucked))),[19,8],6);','Game.Notify(me.type==1?loc("Exploded a shiny wrinkler"):loc("Exploded a wrinkler"),loc("You lost <b>%1</b>!",loc("%1 cookie",LBeautify(me.sucked))),[19,8],6);').replace('Game.Popup(\'<div style="font-size:80%;">\'+loc("+%1!",loc("%1 cookie",LBeautify(me.sucked)))+\'</div>\',Game.mouseX,Game.mouseY);','Game.Popup(\'<div style="font-size:80%;">\'+loc("-%1!",loc("%1 cookie",LBeautify(me.sucked)))+\'</div>\',Game.mouseX,Game.mouseY);')),eval("Game.CalculateGains="+Game.CalculateGains.toString().replace("var suckRate=1/20;","var suckRate=1/2;").replace("Game.cpsSucked=Math.min(1,sucking*suckRate);",'Game.cpsSucked=1 - Math.min(1,Math.pow(suckRate, sucking)); if (Math.ceil(Game.auraMult("Dragon Guts") - 0.1)) { Game.cpsSucked = 0; }')),Game.registerHook("cookiesPerClick",(function(e){return e*(1-Game.cpsSucked)})),eval("Game.SpawnWrinkler="+Game.SpawnWrinkler.toString().replace("if (Math.random()<0.0001) me.type=1;//shiny wrinkler","if (Math.random()<1/8192) me.type=1;//shiny wrinkler")),eval("Game.getWrinklersMax="+Game.getWrinklersMax.toString().replace("n+=Math.round(Game.auraMult('Dragon Guts')*2);","")),Game.getWrinklersMax=function(){var e=12;return Game.Has("Elder spice")&&(e-=2),e},replaceDesc("Elder spice","You attracts <b>2</b> less wrinklers."),decay.getBuffLoss=function(){return Game.auraMult("Epoch Manipulator")?decay.gen>1?1-.5*Game.auraMult("Epoch Manipulator")*(2-1/decay.gen):1/Math.pow(decay.gen,decay.buffDurPow):1/Math.pow(Math.min(1,decay.gen),decay.buffDurPow)},eval("Game.updateBuffs="+Game.updateBuffs.toString().replace("buff.time--;","if (!decay.exemptBuffs.includes(buff.type.name)) { buff.time -= decay.getBuffLoss(); } else { buff.time--; }")),Game.registerHook("cps",(function(e){var a=2+14*Math.pow(1-decay.incMult,12);return Game.globalCpsMult*=a,e})),eval("Game.CalculateGains="+Game.CalculateGains.toString().replace("Game.globalCpsMult=mult;","Game.globalCpsMult*=mult;").replace("if (Game.Has('Occult obstruction')) mult*=0;","if (Game.Has('Occult obstruction')) { mult*=0; } Game.globalCpsMult = 1;")),allValues("decay effects"),eval("Game.shimmer.prototype.pop="+Game.shimmer.prototype.pop.toString().replace("popFunc(this);",'popFunc(this); if (this.force == "" && (!this.noCount)) { decay.purifyAll(2.5, 0.5, 5); decay.stop(1); }')),decay.clickBCStop=function(){decay.stop(.5)},Game.registerHook("click",decay.clickBCStop),eval("Game.UpdateWrinklers="+Game.UpdateWrinklers.toString().replace("Game.wrinklersPopped++;","Game.wrinklersPopped++; if (me.phase == 1) { decay.stop(2 * Math.max((1 - Game.auraMult('Dragon Guts')), 0)); } ")),eval("Game.Win="+Game.Win.toString().replace("Game.recalculateGains=1;","decay.purifyAll(1, 0.8, 3);")),decay.reincarnateBoost=function(){decay.unlocked=!1,decay.stop(20),decay.refreshAll(1)},Game.registerHook("reincarnate",decay.reincarnateBoost),addLoc("Decay propagation rate -%1% for %2!"),new Game.buffType("creation storm",(function(e,a){return{name:"Storm of creation",desc:loc("Decay propagation rate -%1% for %2!",[100*a,Game.sayTime(e*Game.fps,-1)]),icon:[30,5],time:e*Game.fps,add:!1,max:!0,aura:1}})),Game.UpgradesById[64].basePrice/=1e6,Game.UpgradesById[65].basePrice/=1e6,Game.UpgradesById[66].basePrice/=25e4,Game.UpgradesById[67].basePrice/=62500,Game.UpgradesById[68].basePrice/=15625,Game.UpgradesById[69].basePrice/=3906.25,Game.UpgradesById[70].basePrice/=976.5625,Game.UpgradesById[71].basePrice/=244.140625,Game.UpgradesById[72].basePrice/=61.03515625,Game.UpgradesById[73].basePrice/=15.2587890625,Game.UpgradesById[87].basePrice*=1e6,Game.registerHook("check",(function(){Game.Objects.Grandma.amount>=25&&Game.Unlock("Bingo center/Research facility")})),Game.elderWrath=0,replaceDesc("One mind","Each grandma gains <b>+0.0<span></span>2 base CpS per grandma</b>.<br>Also unlocks the <b>Elder Pledge</b>, which slowly purifies the decay for some cookies.<q>Repels the ancient evil with industrial magic.</q>"),Game.Upgrades["One mind"].buyFunction=function(){Game.SetResearch("Exotic nuts"),Game.storeToRefresh=1},replaceDesc("Exotic nuts","Cookie production multiplier <b>+4%</b>, and <b>halves</b> the Elder Pledge cooldown.<q>You'll go crazy over these!</q>"),replaceDesc("Communal brainsweep","Each grandma gains another <b>+0.0<span></span>2 base CpS per grandma</b>, and makes the Elder Pledge purify for <b>twice as much time</b>.<q>Burns the corruption with the worker's might.</q>"),Game.Upgrades["Communal brainsweep"].buyFunction=function(){Game.SetResearch("Arcane sugar"),Game.storeToRefresh=1},replaceDesc("Arcane sugar","Cookie production multiplier <b>+5%</b>, and <b>halves</b> the Elder Pledge cooldown.<q>You'll go crazy over these!</q>"),replaceDesc("Elder Pact","Each grandma gains <b>+0.0<span></span>5 base CpS per portal</b>, and makes the Elder Pledge <b>twice as powerful</b>.<q>Questionably unethical.</q>"),Game.Upgrades["Elder Pact"].buyFunction=function(){Game.storeToRefresh=1},replaceDesc("Sacrificial rolling pins","The Elder Pledge is <b>10 times</b> cheaper.<q>As its name suggests, it suffers so that everyone can live tomorrow.</q>"),Game.Upgrades["One mind"].clickFunction=function(){return!0},Game.Upgrades["Elder Pact"].clickFunction=function(){return!0},replaceDesc("Elder Pledge","Purifies the decay, at least for a short while. Does not affect decay momentum at all.<br>Price also scales with highest raw CpS this ascend.<q>Although, yes - the cost is now uncapped; the scaling is now much, much weaker.</q>"),Game.Upgrades["Elder Pledge"].buyFunction=function(){Game.pledges++,Game.pledgeT=Game.getPledgeDuration(),Game.Unlock("Elder Covenant"),decay.stop(10+20*Game.Has("Uranium rolling pins")),Game.storeToRefresh=1},Game.Upgrades["Elder Pledge"].priceFunc=function(){return 10*Game.cookiesPsRawHighest*Math.pow(Game.pledges,4)*(Game.Has("Sacrificial rolling pins")?.1:1)},Game.Upgrades["Elder Pledge"].displayFuncWhenOwned=function(){return Game.pledgeT>0?'<div style="text-align:center;">'+loc("Time remaining until pledge runs out:")+"<br><b>"+Game.sayTime(Game.pledgeT,-1)+"</b></div>":'<div style="text-align:center;">'+loc("Elder Pledge will be usable again in:")+"<br><b>"+Game.sayTime(Game.pledgeC,-1)+"</b></div>"},Game.Upgrades["Elder Pledge"].timerDisplay=function(){return Game.Upgrades["Elder Pledge"].bought?Game.pledgeT>0?1-Game.pledgeT/Game.getPledgeDuration():1-Game.pledgeC/Game.getPledgeCooldown():-1},Game.getPledgeDuration=function(){var e=15*Game.fps;return Game.Has("Communal brainsweep")&&(e*=2),e},Game.getPledgeStrength=function(){var e=.15;Game.Has("Elder Pact")&&(e*=2),Game.Has("Unshackled Elder Pledge")&&(e*=2);var a=5;return Game.Has("Elder Pact")&&(a*=2),[1+e/Game.fps,.5/(Game.getPledgeDuration()*a),a]},Game.getPledgeCooldown=function(){var e=12*Game.fps*60;return Game.Has("Exotic nuts")&&(e/=2),Game.Has("Arcane sugar")&&(e/=2),Game.Has("Unshackled Elder Pledge")&&(e*=.75),e},Game.pledgeC=0,replaceDesc("Elder Covenant","Stops Wrath Cookies from spawning with decay, at the cost of the decay propagating <b>50%</b> faster.<q>Blocks an outlet for decay, which naturally, causes it to spread faster due to increased concentration.</q>"),replaceDesc("Revoke Elder Covenant","Decay propagation speed will return to normal, but Wrath Cookies will resume spawning with decay."),Game.Upgrades["Elder Covenant"].basePrice=66666e31,Game.Upgrades["Elder Covenant"].priceFunc=function(){return Math.max(Game.Upgrades["Elder Covenant"].basePrice,3600*Game.cookiesPsRawHighest*24)},Game.Upgrades["Elder Covenant"].buyFunction=function(){Game.Win("Elder calm"),Game.Lock("Revoke Elder Covenant"),Game.Unlock("Revoke Elder Covenant"),Game.storeToRefresh=1},eval("Game.UpdateGrandmapocalypse="+Game.UpdateGrandmapocalypse.toString().replace("Game.elderWrath=1;",'if (decay.gen > 1) { Game.Notify("Purification complete!", "You also gained some extra cps to act as buffer for the decay."); } else { Game.Notify("Purification complete!", ""); }').replace("Game.Lock('Elder Pledge');","Game.pledgeC = Game.getPledgeCooldown();").replace("Game.Unlock('Elder Pledge');","decay.times.sincePledgeEnd = 0;").replace("(Game.Has('Elder Pact') && Game.Upgrades['Elder Pledge'].unlocked==0)","(Game.Has('One mind') && Game.Upgrades['Elder Pledge'].unlocked==0)").replace("Game.elderWrath=1;","").replace("Game.elderWrath++;","").replace("Game.Has('Elder Pact') && Game.Upgrades['Elder Pledge'].unlocked==0","false")),allValues("decay purification & halt"),eval("Game.CalculateGains="+Game.CalculateGains.toString().replace("Game.Has('Shimmering veil [off]')","false")),Game.veilHP=1e3,Game.veilCollapseAt=.1,Game.veilMaxHP=0,Game.setVeilMaxHP=function(){var e=1500;Game.Has("Reinforced membrane")&&(e*=1.25),Game.veilMaxHP=e},Game.setVeilMaxHP(),Game.registerHook("reincarnate",(function(){Game.setVeilMaxHP(),Game.veilHP=Game.veilMaxHP})),replaceDesc("Shimmering veil","Unlocks the <b>Shimmering veil</b>, which is a toggleable veil that <b>absorbs</b> your decay when on; however, if it absorbs too much, it may collapse and temporarily massively increase your rate of decay. The veil heals over time while off.<q>Stars contains purity, whose heat repels and destroys the decay. With this veil brings a galaxy of stars at your disposal; though they are merely an image of the real thing, their shine still significantly halts the ever-growing decay.</q>"),Game.getVeilBoost=function(){var e=.6;return Game.Has("Glittering edge")&&(e+=.25),e},Game.getVeilCost=function(e){var a=60;return Game.Has("Reinforced membrane")&&(a/=2),e&&(a*=7777,Game.Has("Delicate touch")&&(a/=2),Game.Has("Steadfast murmur")&&(a/=2)),a*Game.cookiesPsRawHighest},Game.getVeilCooldown=function(){var e=60*Game.fps*12;return Game.Has("Reinforced membrane")&&(e/=2),e},Game.getVeilReturn=function(){var e=2.89;return Game.Has("Reinforced membrane")&&(e*=.75),Game.Has("Delicate touch")&&(e*=.85),Game.Has("Steadfast murmur")&&(e*=.85),e},Game.getVeilHeal=function(e,a){if(e==a)return a;var t=.05/Game.fps,i=.5/Game.fps,o=1;return Game.Has("Reinforced membrane")&&(i*=2,t*=1.25),Game.Has("Delicate touch")&&(o*=.75),Game.Has("Steadfast murmur")&&(o*=.75),e+=i*Math.pow(e/a,o),e=Math.min((1+t)*e,e+t*(a-e)),Math.min(e,a)},addLoc("This Shimmering Veil is currently taking on <b>%1%</b> of your decay. <br><br>If it collapses, turning it back on will require <b>%2x</b> more cookies than usual, and you must wait for at least <b>%3</b> before doing so. <br>In addition, it will return <b>%4%</b> of the decay it absorbed back onto you when it collapses."),Game.Upgrades["Shimmering veil [on]"].descFunc=function(){return("Shimmering veil [on]"==this.name?'<div style="text-align:center;">'+loc("Active.")+'</div><div class="line"></div>':"")+loc("This Shimmering Veil is currently taking on <b>%1%</b> of your decay. <br><br>If it collapses, turning it back on will require <b>%2x</b> more cookies than usual, and you must wait for at least <b>%3</b> before doing so. <br>In addition, it will return <b>%4%</b> of the decay it absorbed back onto you when it collapses.",[Beautify(100*Game.getVeilBoost()),Beautify(Game.getVeilCost(!0)/Game.getVeilCost(!1),2),Game.sayTime(Game.getVeilCooldown(),2),Beautify(100*Game.getVeilReturn(),2)])},addLoc("This Shimmering Veil is slowly healing itself. If activated, this veil will take on <b>%1%</b> of your decay. <br><br>If it collapses, turning it back on will require <b>%2x</b> more cookies than usual, and you must wait for at least <b>%3</b> before doing so. <br>In addition, it will return <b>%4%</b> of the decay it absorbed back onto you when it collapses."),addLoc("Your veil has previously collapsed, so this activation will require <b>%1x</b> more cookies than usual."),Game.Upgrades["Shimmering veil [off]"].descFunc=function(){return("Shimmering veil [on]"==this.name?'<div style="text-align:center;">'+loc("Active.")+'</div><div class="line"></div>':"")+loc("This Shimmering Veil is slowly healing itself. If activated, this veil will take on <b>%1%</b> of your decay. <br><br>If it collapses, turning it back on will require <b>%2x</b> more cookies than usual, and you must wait for at least <b>%3</b> before doing so. <br>In addition, it will return <b>%4%</b> of the decay it absorbed back onto you when it collapses.",[Beautify(100*Game.getVeilBoost()),Beautify(Game.getVeilCost(!0)/Game.getVeilCost(!1),2),Game.sayTime(Game.getVeilCooldown(),2),Beautify(100*Game.getVeilReturn(),2)])+" "+(Game.veilPreviouslyCollapsed?'<div class="line"></div>'+loc("Your veil has previously collapsed, so this activation will require <b>%1x</b> more cookies than usual.",[Beautify(Game.getVeilCost(!0)/Game.getVeilCost(!1),2)]):"")},Game.Upgrades["Shimmering veil [off]"].priceFunc=function(){return Game.getVeilCost(Game.veilPreviouslyCollapsed)},Game.Upgrades["Shimmering veil [off]"].buyFunction=function(){Game.veilPreviouslyCollapsed=!1,decay.triggerNotif("veil")},replaceDesc("Reinforced membrane","Makes the <b>Shimmering Veil</b> cost <b>half</b> as much, <b>reduces</b> the amount of decay applied on collapse and <b>halves</b> the amount of cooldown, makes it <b>heal faster</b> when turned off, and increases its maximum health by <b>25%</b>.<q>A consistency between jellyfish and cling wrap.</q>"),replaceDesc("Delicate touch","Makes the <b>Shimmering Veil</b> return <b>slightly less decay</b> on collapse, and <b>halves</b> the multiplier to reactivation cost if it had collapsed.<br>Also makes the <b>Shimmering Veil</b> heal <b>slightly faster</b> when turned off.<q>It breaks so easily.</q>"),replaceDesc("Steadfast murmur","Makes the <b>Shimmering Veil</b> return <b>slightly less decay</b> on collapse, and <b>halves</b> the multiplier to reactivation cost if it had collapsed.<br>Also makes the <b>Shimmering Veil</b> heal <b>slightly faster</b> when turned off.<q>Lend an ear and listen.</q>"),replaceDesc("Glittering edge","The <b>Shimmering Veil</b> takes on <b>25%</b> more decay.<q>Stare into it, and the cosmos will stare back.</q>"),Game.Upgrades["Shimmering veil"].basePrice/=1e3,Game.Upgrades["Reinforced membrane"].basePrice/=1e3,Game.Upgrades["Delicate touch"].basePrice/=100,Game.Upgrades["Steadfast murmur"].basePrice/=100,Game.Upgrades["Glittering edge"].basePrice/=100;var brokenVeil=new Game.Upgrade("Shimmering veil [broken]","",0,[9,10]);brokenVeil.pool=["toggle"],Game.UpgradesByPool.toggle.push(brokenVeil),brokenVeil.order=40005,addLoc("This Shimmering Veil has collapsed due to excess decay. Because of this, reactivating it again will take <b>%1x</b> more cookies than usual."),brokenVeil.descFunc=function(){return loc("This Shimmering Veil has collapsed due to excess decay. Because of this, reactivating it again will take <b>%1x</b> more cookies than usual.",[Beautify(Game.getVeilCost(!0)/Game.getVeilCost(!1))])},addLoc("This Shimmering Veil will be restored in: "),brokenVeil.displayFuncWhenOwned=function(){return'<div style="text-align:center;">'+loc("This Shimmering Veil will be restored in: ")+"<br><b>"+Game.sayTime(Game.veilRestoreC,-1)+"</b></div>"},brokenVeil.timerDisplay=function(){return Game.Upgrades["Shimmering veil [broken]"].bought?1-Game.veilRestoreC/Game.getVeilCooldown():-1},Game.veilOn=function(){return Game.Has("Shimmering veil [off]")&&!Game.Has("Shimmering veil [broken]")},Game.veilOff=function(){return Game.Has("Shimmering veil [on]")&&!Game.Has("Shimmering veil [broken]")},Game.veilBroken=function(){return!Game.Has("Shimmering veil [off]")&&!Game.Has("Shimmering veil [on]")},eval("Game.Logic="+Game.Logic.toString().replace("if (Game.Has('Shimmering veil') && !Game.Has('Shimmering veil [off]') && !Game.Has('Shimmering veil [on]'))","if (Game.Has('Shimmering veil') && !Game.veilOn() && !Game.veilOff() && !Game.veilBroken())")),eval("Game.DrawBackground="+Game.DrawBackground.toString().replace("if (Game.Has('Shimmering veil [off]'))","if (Game.veilOn())")),Game.veilAbsorbFactor=2,Game.updateVeil=function(){if(!Game.Has("Shimmering veil"))return!1;if(Game.veilOn()){var e=Math.pow(Game.getVeilBoost(),Game.veilAbsorbFactor);return Game.veilHP*=Math.pow(decay.update(20,e)/decay.gen,1/Game.fps),Game.veilHP-=Game.veilMaxHP*Math.min(Math.sqrt(Game.veilMaxHP/Game.veilHP),10)/(500*Game.fps),Game.veilHP<Game.veilCollapseAt&&(Game.veilHP=Game.veilCollapseAt,Game.collapseVeil()),!0}return Game.veilOff()?(Game.veilHP=Game.getVeilHeal(Game.veilHP,Game.veilMaxHP),!0):Game.veilBroken()?(Game.veilRestoreC--,Game.veilRestoreC<=0&&(Game.veilRestoreC=0,Game.veilHP=Game.veilMaxHP,Game.Lock("Shimmering veil [broken]"),Game.Unlock("Shimmering veil [off]"),Game.Unlock("Shimmering veil [on]"),Game.Upgrades["Shimmering veil [on]"].earn(),Game.Notify("Veil restored!","Your Shimmering Veil has recovered from the collapse, but your next activation will require more cookies.")),!0):void 0},Game.veilRestoreC=0,Game.veilPreviouslyCollapsed=!1,Game.collapseVeil=function(){Game.Has("Sparkling wonder")&&Math.random()<.1?(Game.veilHP=Game.veilMaxHP,Game.Notify("Veil revived","Your Sparkling wonder saved your veil from collapse and healed it back to full health!",[23,34]),Game.Win("Thick-skinned")):(Game.Lock("Shimmering veil [on]"),Game.Lock("Shimmering veil [off]"),Game.Upgrades["Shimmering veil [broken]"].earn(),Game.veilRestoreC=Game.getVeilCooldown(),Game.veilPreviouslyCollapsed=!0,decay.amplifyAll(Math.pow(Game.veilMaxHP/Game.veilHP,Game.veilAbsorbFactor*Game.getVeilReturn()),0,1),Game.Notify("Veil collapse!","Your Shimmering Veil collapsed.",[30,5]),PlaySound("snd/spellFail.mp3",1))},replaceAchievDesc("Thick-skinned","Have your <b>Sparkling wonder</b> save your <b>Shimmering veil</b> from collapsing."),Game.loseShimmeringVeil=function(e){};var veilDrawOrigin=selectStatement(Game.DrawBackground.toString(),Game.DrawBackground.toString().indexOf("if (Game.veilOn())")),veilDraw=veilDrawOrigin;Game.veilOpacity=function(){return Math.pow(Game.veilHP/Game.veilMaxHP,.35)},Game.veilRevolveFactor=function(e){return.01*(1+.6*e)*Math.pow(Game.veilHP/Game.veilMaxHP,.05)},Game.veilParticleSizeMax=function(e){return 64*Math.pow(.85,e)*Math.pow(Game.veilHP/Game.veilMaxHP,.05)},Game.veilParticleSpeed=function(e){return 32*Math.pow(1.4,e)*Math.pow(Game.veilHP/Game.veilMaxHP,.05)},Game.veilParticleSpeedMax=function(e){return 32*(1+.5*e)},Game.veilParticleQuantity=function(e){return Math.round(9*(e+1))},Game.veilParticleSpawnBound=function(e){return 155-30*(1-Math.pow(Game.veilHP/Game.veilMaxHP,.75))},veilDraw=veilDraw.replace("ctx.globalAlpha=1;","ctx.globalAlpha=Game.veilOpacity();"),veilDraw=veilDraw.replace("ctx.globalCompositeOperation='source-over';","ctx.globalAlpha = 1; ctx.globalCompositeOperation='source-over';");var veilParticlesOrigin=selectStatement(veilDraw,veilDraw.indexOf("for (i=0;i<6;i++)")),veilParticles=veilParticlesOrigin;veilParticles=veilParticles.replace("for (i=0;i<6;i++)","for (i=0;i<Game.veilParticleQuantity(set);i++)"),veilParticles=veilParticles.replace("var t=Game.T+i*15;","var t=Game.T+i*Math.round((90 / Game.veilParticleQuantity(set)));"),veilParticles=veilParticles.replace("var a=(Math.floor(t/30)*30*6-i*30)*0.01;","var a=(Math.floor(t/30)*30*6-i*30)*Game.veilRevolveFactor(set);"),veilParticles=veilParticles.replace("var size=32*(1-Math.pow(r*2-1,2));","var size=Game.veilParticleSizeMax(set)*(1-Math.pow(r*2-1,2));"),veilParticles=veilParticles.replace("var xx=x+Math.sin(a)*(110+r*16);","var xx=x+Math.sin(a)*(Game.veilParticleSpawnBound(set) - Game.veilParticleSpeed(set) * Math.cos(r));").replace("var yy=y+Math.cos(a)*(110+r*16);","var yy=y+Math.cos(a)*(Game.veilParticleSpawnBound(set) - Game.veilParticleSpeed(set) * Math.sin(r));"),veilDraw=veilDraw.replace(veilParticlesOrigin,"var set = 0; "+veilParticles+"; set = 1; "+veilParticles+"; set = 2; "+veilParticles+"; set = 3; "+veilParticles),eval("Game.DrawBackground="+Game.DrawBackground.toString().replace(veilDrawOrigin,veilDraw)),allValues("veil"),decay.addSpells=function(){addLoc("Liquify politician"),addLoc("Purifies a lot of decay with a very high purity limit."),addLoc("Amplifies your decay."),addLoc("Corruption cleared!"),addLoc("Backfire! Corruption intensified!"),addLoc("Manifest spring"),addLoc("Decay propagation is %1% slower for the next %2 minutes.<br>(this stacks with itself multiplicatively)"),addLoc("Decay propagation is %1% faster for the next %2 minutes."),addLoc("The water shall flow!"),addLoc("Oops! Pipes broken!"),addLoc("Unending flow"),addLoc("Stagnant body"),addLoc("Decay propagation rate +%1% for %2!"),gp.spells["liquify politician"]={name:loc("Liquify politician"),desc:loc("Purifies a lot of decay with a very high purity limit."),failDesc:loc("Amplifies your decay."),icon:[5,0,custImg],costMin:6,costPercent:.45,id:9,win:function(){decay.purifyAll(50,.25,100),Game.Popup('<div style="font-size:80%;">'+loc("Corruption cleared!")+"</div>",Game.mouseX,Game.mouseY)},fail:function(){decay.amplifyAll(10,.5),Game.Popup('<div style="font-size:80%;">'+loc("Backfire! Corruption intensified!")+"</div>",Game.mouseX,Game.mouseY)}},gp.spellsById.push(gp.spells["liquify politician"]),gp.spells["manifest spring"]={name:loc("Manifest spring"),desc:loc("Decay propagation is %1% slower for the next %2 minutes.<br>(this stacks with itself multiplicatively)",[25,2]),failDesc:loc("Decay propagation is %1% faster for the next %2 minutes.",[50,2]),icon:[6,0,custImg],costMin:10,costPercent:.15,id:10,win:function(){Game.hasBuff("Unending flow")?Game.hasBuff("Unending flow").arg1=Game.hasBuff("Unending flow").arg1+.25*(1-Game.hasBuff("Unending flow").arg1):Game.gainBuff("unending flow",120,.25),Game.Popup('<div style="font-size:80%;">'+loc("The water shall flow!")+"</div>",Game.mouseX,Game.mouseY)},fail:function(){Game.gainBuff("stagnant body",120,.5),Game.Popup('<div style="font-size:80%;">'+loc("Oops! Pipes broken!")+"</div>",Game.mouseX,Game.mouseY)}},gp.spellsById.push(gp.spells["manifest spring"]),new Game.buffType("unending flow",(function(e,a){return{name:loc("Unending flow"),desc:loc("Decay propagation rate -%1% for %2!",[100*a,Game.sayTime(e*Game.fps,-1)]),icon:[6,0,custImg],time:e*Game.fps,add:!1,max:!1,aura:0}})),new Game.buffType("stagnant body",(function(e,a){return{name:loc("Stagnant body"),desc:loc("Decay propagation rate +%1% for %2!",[100*a,Game.sayTime(e*Game.fps,-1)]),icon:[30,3],time:e*Game.fps,add:!1,max:!1,aura:0}}))},Game.rebuildGrimoire=function(){if(void 0===gp)return!1;let e=gp;var a="";for(var t in a+="<style>#grimoireBG{background:url("+Game.resPath+"img/shadedBorders.png),url("+Game.resPath+"img/BGgrimoire.jpg);background-size:100% 100%,auto;position:absolute;left:0px;right:0px;top:0px;bottom:16px;}#grimoireContent{position:relative;box-sizing:border-box;padding:4px 24px;}#grimoireBar{max-width:95%;margin:4px auto;height:16px;}#grimoireBarFull{transform:scale(1,2);transform-origin:50% 0;height:50%;}#grimoireBarText{transform:scale(1,0.8);width:100%;position:absolute;left:0px;top:0px;text-align:center;color:#fff;text-shadow:-1px 1px #000,0px 0px 4px #000,0px 0px 6px #000;margin-top:2px;}#grimoireSpells{text-align:center;width:100%;padding:8px;box-sizing:border-box;}.grimoireIcon{pointer-events:none;margin:2px 6px 0px 6px;width:48px;height:48px;opacity:0.8;position:relative;}.grimoirePrice{pointer-events:none;}.grimoireSpell{box-shadow:4px 4px 4px #000;cursor:pointer;position:relative;color:#f33;opacity:0.8;text-shadow:0px 0px 4px #000,0px 0px 6px #000;font-weight:bold;font-size:12px;display:inline-block;width:60px;height:74px;background:url("+Game.resPath+"img/spellBG.png);}.grimoireSpell.ready{color:rgba(255,255,255,0.8);opacity:1;}.grimoireSpell.ready:hover{color:#fff;}.grimoireSpell:hover{box-shadow:6px 6px 6px 2px #000;z-index:1000000001;top:-1px;}.grimoireSpell:active{top:1px;}.grimoireSpell.ready .grimoireIcon{opacity:1;}.grimoireSpell:hover{background-position:0px -74px;} .grimoireSpell:active{background-position:0px 74px;}.grimoireSpell:nth-child(4n+1){background-position:-60px 0px;} .grimoireSpell:nth-child(4n+1):hover{background-position:-60px -74px;} .grimoireSpell:nth-child(4n+1):active{background-position:-60px 74px;}.grimoireSpell:nth-child(4n+2){background-position:-120px 0px;} .grimoireSpell:nth-child(4n+2):hover{background-position:-120px -74px;} .grimoireSpell:nth-child(4n+2):active{background-position:-120px 74px;}.grimoireSpell:nth-child(4n+3){background-position:-180px 0px;} .grimoireSpell:nth-child(4n+3):hover{background-position:-180px -74px;} .grimoireSpell:nth-child(4n+3):active{background-position:-180px 74px;}.grimoireSpell:hover .grimoireIcon{top:-1px;}.grimoireSpell.ready:hover .grimoireIcon{animation-name:bounce;animation-iteration-count:infinite;animation-duration:0.8s;}.noFancy .grimoireSpell.ready:hover .grimoireIcon{animation:none;}#grimoireInfo{text-align:center;font-size:11px;margin-top:12px;color:rgba(255,255,255,0.75);text-shadow:-1px 1px 0px #000;}</style>",a+='<div id="grimoireBG"></div>',a+='<div id="grimoireContent">',a+='<div id="grimoireSpells">',e.spells){var i=(o=e.spells[t]).icon||[28,12];a+='<div class="grimoireSpell titleFont" id="grimoireSpell'+o.id+'" '+Game.getDynamicTooltip("Game.ObjectsById["+e.parent.id+"].minigame.spellTooltip("+o.id+")","this")+'><div class="usesIcon shadowFilter grimoireIcon" style="'+writeIcon(i)+'"></div><div class="grimoirePrice" id="grimoirePrice'+o.id+'">-</div></div>'}a+="</div>";i=[29,14];for(var t in a+='<div id="grimoireBar" class="smallFramed meterContainer" style="width:1px;"><div '+Game.getDynamicTooltip("Game.ObjectsById["+e.parent.id+"].minigame.refillTooltip","this")+' id="grimoireLumpRefill" class="usesIcon shadowFilter lumpRefill" style="left:-40px;top:-17px;background-position:'+48*-i[0]+"px "+48*-i[1]+'px;"></div><div id="grimoireBarFull" class="meter filling" style="width:1px;"></div><div id="grimoireBarText" class="titleFont"></div><div '+Game.getTooltip('<div style="padding:8px;width:300px;font-size:11px;text-align:center;">'+loc('This is your magic meter. Each spell costs magic to use.<div class="line"></div>Your maximum amount of magic varies depending on your amount of <b>Wizard towers</b>, and their level.<div class="line"></div>Magic refills over time. The lower your magic meter, the slower it refills.')+"</div>")+' style="position:absolute;left:0px;top:0px;right:0px;bottom:0px;"></div></div>',a+='<div id="grimoireInfo"></div>',a+="</div>",l("rowSpecial7").innerHTML=a,e.magicBarL=l("grimoireBar"),e.magicBarFullL=l("grimoireBarFull"),e.magicBarTextL=l("grimoireBarText"),e.lumpRefill=l("grimoireLumpRefill"),e.infoL=l("grimoireInfo"),e.spells){var o=e.spells[t];AddEvent(l("grimoireSpell"+o.id),"click",function(a){return function(){PlaySound("snd/tick.mp3"),e.castSpell(a)}}(o))}AddEvent(e.lumpRefill,"click",(function(){e.magic<e.magicM&&Game.refillLump(1,(function(){e.magic+=100,e.magic=Math.min(e.magic,e.magicM),PlaySound("snd/pop"+Math.floor(3*Math.random()+1)+".mp3",.75)}))}))},eval('Game.shimmerTypes["golden"].popFunc='+Game.shimmerTypes.golden.popFunc.toString().replace("if (me.wrath>0) list.push('clot','multiply cookies','ruin cookies');","if (me.wrath>0) list.push('clot','ruin cookies');")),eval('Game.shimmerTypes["golden"].popFunc='+Game.shimmerTypes.golden.popFunc.toString().replace("if (Game.BuildingsOwned>=10 && Math.random()<0.25) list.push('building special');","if (Game.BuildingsOwned>=10 && me.wrath==0 && Math.random()<0.25) list.push('building special');"));for(let e in Game.Objects)Game.Objects[e].level=Math.max(1,Game.Objects[e].level);Game.LoadMinigames(),eval("Game.ClickCookie="+Game.ClickCookie.toString().replace("Game.Win('Uncanny clicker');","{ Game.Win('Uncanny clicker'); decay.triggerNotif('autoclicker'); }")),Game.baseResearchTime=600*Game.fps,allValues("spells; decay complete"),eval("Game.modifyBuildingPrice="+Game.modifyBuildingPrice.toString().replace("if (Game.hasBuff('Crafty pixies')) price*=0.98;","if (Game.hasBuff('Crafty pixies')) price*=0.90;")),Game.registerHook("check",(()=>{if(Game.Objects.Farm.minigameLoaded&&!gardenUpdated){if(M=Game.Objects.Farm.minigame,gap=M,null===l("gardenStats"))return!1;M.soilsById.soilsById=[];var n=0;for(var i in M.soils)M.soils[i].id=n,M.soils[i].key=i,M.soilsById[n]=M.soils[i],n++;M.harvestAll=function(e,a,t){for(var i=0,o=0;o<2;o++)for(var s=0;s<6;s++)for(var r=0;r<6;r++)if(M.plot[s][r][0]>=1){var n=!0,l=M.plot[s][r],c=M.plantsById[l[0]-1];e&&c!=e&&(n=!1),t&&c.immortal&&(n=!1),a&&l[1]<c.mature&&(n=!1),n&&(i+=M.harvest(r,s)?1:0)}i>0&&setTimeout((function(){PlaySound("snd/harvest1.mp3",1,.2)}),50),i>2&&setTimeout((function(){PlaySound("snd/harvest2.mp3",1,.2)}),150),i>6&&setTimeout((function(){PlaySound("snd/harvest3.mp3",1,.2)}),250)},eval("M.getMuts="+M.getMuts.toString().replace("if (neighsM['bakerWheat']>=1 && neighsM['thumbcorn']>=1) muts.push(['cronerice',0.01]);","if (neighsM['bakerWheat']>=1 && neighsM['wrinklegill']>=1) muts.push(['cronerice',0.01]);")),eval("M.getMuts="+M.getMuts.toString().replace("if (neighsM['cronerice']>=1 && neighsM['thumbcorn']>=1) muts.push(['gildmillet',0.03]);","if (neighsM['bakerWheat']>=1 && neighsM['thumbcorn']>=1) muts.push(['gildmillet',0.03]);"));var chanceChanges=[[.07,.12],[.06,.11],[.05,.1],[.04,.08],[.03,.06],[.02,.04],[.01,.03],[.005,.2],[.002,.01],[.001,.008],[7e-4,.007],[1e-4,.002]],changeStr=M.getMuts.toString();for(let e in chanceChanges)changeStr=replaceAll(chanceChanges[e][0].toString(),chanceChanges[e][1].toString(),changeStr);eval("M.getMuts="+changeStr);var ageChange=function(e,a,t){gap.plants[e].ageTick=a,gap.plants[e].ageTickR=t};ageChange("elderwort",1.5,1.5),ageChange("drowsyfern",.5,1),ageChange("queenbeet",2,.8),ageChange("bakeberry",1.5,1),ageChange("queenbeetLump",.2,.2),ageChange("duketater",.05,2),ageChange("doughshroom",2,2),ageChange("tidygrass",.5,1),ageChange("everdaisy",.75),ageChange("nursetulip",1,2.5),ageChange("cronerice",.6,2),ageChange("clover",2,2.5),ageChange("whiskerbloom",3,3),ageChange("wrinklegill",2,4),eval("M.computeEffs="+M.computeEffs.toString().replace("effs.cursorCps+=0.01*mult","effs.cursorCps+=0.005*mult")),eval("M.computeEffs="+M.computeEffs.toString().replace("else if (name=='whiskerbloom') effs.milk+=0.002*mult;","else if (name=='whiskerbloom') effs.milk+=0.001*mult;")),eval("M.computeEffs="+M.computeEffs.toString().replace("goldenClover') effs.goldenCookieFreq+=0.03*mult;","goldenClover') { effs.goldenCookieFreq+=0.03*mult; effs.goldenCookieEffDur*=1-0.015; effs.goldenCookieGain+=1.5; }")),eval("M.convert="+M.convert.toString().replace("Game.gainLumps(10);","Game.gainLumps(15);")),M.plants.bakerWheat.children=["bakerWheat","thumbcorn","cronerice","gildmillet","bakeberry","clover","goldenClover","chocoroot","tidygrass"],M.plants.thumbcorn.children=["bakerWheat","thumbcorn","gildmillet","glovemorel"],M.plants.wrinklegill.children=["cronerice","elderwort","shriekbulb"],M.plants.whiskerbloom.effsStr='<div class="green">&bull;'+loc("milk effects")+" +0.05%</div>",M.plants.glovemorel.effsStr='<div class="green">&bull;'+loc("cookies/click")+' +4%</div><div class="green">&bull; '+loc("%1 CpS",Game.Objects.Cursor.single)+' +0.5%</div><div class="red">&bull; '+loc("CpS")+" -1%</div>",M.plants.goldenClover.effsStr='<div class="green">&bull; '+loc("golden cookie frequency")+' +3%</div><div class="green">&bull; '+loc("golden cookie gains")+' +150%</div><div class="red">&bull; '+loc("golden cookie effect duration")+" -1.5%</div>",M.soils.dirt.tick=2,M.soils.fertilizer.tick=1,M.soils.clay.tick=5,M.soils.pebbles.tick=2,M.soils.woodchips.tick=2,M.soils.dirt.effsStr='<div class="gray">&bull; '+loc("tick every %1","<b>"+Game.sayTime(120*Game.fps)+"</b>")+"</div>",M.soils.fertilizer.effsStr='<div class="gray">&bull; '+loc("tick every %1","<b>"+Game.sayTime(60*Game.fps)+"</b>")+'</div><div class="red">&bull; '+loc("passive plant effects")+' <b>-25%</b></div><div class="red">&bull; '+loc("weed growth")+" <b>+20%</b></div>",M.soils.clay.effsStr='<div class="gray">&bull; '+loc("tick every %1","<b>"+Game.sayTime(300*Game.fps)+"</b>")+'</div><div class="green">&bull; '+loc("passive plant effects")+" <b>+25%</b></div>",M.soils.pebbles.effsStr='<div class="gray">&bull; '+loc("tick every %1","<b>"+Game.sayTime(120*Game.fps)+"</b>")+'</div><div class="red">&bull; '+loc("passive plant effects")+' <b>-75%</b></div><div class="green">&bull; '+loc("<b>%1% chance</b> of collecting seeds automatically when plants expire",35)+'</div><div class="green">&bull; '+loc("weed growth")+" <b>-90%</b></div>",M.soils.woodchips.effsStr='<div class="gray">&bull; '+loc("tick every %1","<b>"+Game.sayTime(300*Game.fps)+"</b>")+'</div><div class="red">&bull; '+loc("passive plant effects")+' <b>-75%</b></div><div class="green">&bull; '+loc("plants spread and mutate <b>%1 times more</b>",3)+'</div><div class="green">&bull; '+loc("weed growth")+" <b>-90%</b></div>",M.forceMuts=!1,eval("Game.refillLump="+Game.refillLump.toString().replace("func();","func(); if (gap.loopsMult == 3) { gap.forceMuts = true; }"));var gardenMutsStr=selectStatement(M.logic.toString(),M.logic.toString().indexOf("for (var loop=0;loop<loops;loop++)"),0),gardenMutsStrNew=gardenMutsStr.replace("var muts=M.getMuts(neighs,neighsM);","var muts=M.getMuts(neighs,neighsM); if (M.forceMuts && muts.length > 0) { loop--; } else if (M.forceMuts) { break; }").replace("if (list.length>0) M.plot[y][x]=[M.plants[choose(list)].id+1,0];","if (list.length>0) { M.plot[y][x]=[M.plants[choose(list)].id+1,0]; break; }");gardenMutsStrNew=gardenMutsStrNew.replace("var chance=0.002*weedMult*M.plotBoost[y][x][2];","var chance=0.002*weedMult*M.plotBoost[y][x][2]; if (M.forceMuts) { chance = 1; }"),eval("M.logic="+M.logic.toString().replace(gardenMutsStr,gardenMutsStrNew).replace("M.toCompute=true;","M.toCompute=true; M.forceMuts = false;")),addLoc("Click to refill your soil timer and trigger <b>1</b> plant growth tick with a <b>guaranteed mutation</b> on <b>every</b> tile that can have a mutation, for the price of %1."),eval("M.refillTooltip="+M.refillTooltip.toString().replace('with <b>x%1</b> spread and mutation rate for %2.",[3,\'<span class="price lump">\'+loc("%1 sugar lump",LBeautify(1))+\'</span>\']','with a <b>guaranteed mutation</b> on <b>every</b> tile that can have a mutation, for the price of %1.",[\'<span class="price lump">\'+loc("%1 sugar lump",LBeautify(1))+\'</span>\']')),eval("M.buildPanel="+M.buildPanel.toString().replace("1000*60*10","1000*60*3")),M.buildPanel(),M.tools.convert.desc=loc('A swarm of sugar hornets comes down on your garden, <span class="red">destroying every plant as well as every seed you\'ve unlocked</span> - leaving only a %1 seed.<br>In exchange, they will grant you <span class="green">%2</span>.<br>This action is only available with a complete seed log.',[loc("Baker's wheat"),loc("%1 sugar lump",LBeautify(15))]),eval("M.askConvert="+M.askConvert.toString().replace("10","30")),eval("M.convert="+M.convert.toString().replace("10","30")),eval("M.unlockSeed="+M.unlockSeed.toString().replace("me.unlocked=1;",'me.unlocked=1; decay.triggerNotif("garden"); ')),eval("M.computeEffs="+M.computeEffs.toString().replace("buildingCost:1,","buildingCost:1, wrinklerApproach:1, wrathReplace:1, haltPower:1, decayRate:1, decayMomentum:1").replace("else if (name=='wardlichen') {effs.wrinklerSpawn*=1-0.15*mult;effs.wrathCookieFreq*=1-0.02*mult;}","else if (name=='wardlichen') {effs.haltPower+=0.02*mult; effs.wrathReplace*=1-0.02*mult;}").replace("else if (name=='wrinklegill') {effs.wrinklerSpawn+=0.02*mult;effs.wrinklerEat+=0.01*mult;}","else if (name=='wrinklegill') {effs.wrinklerApproach*=1-0.05*mult;}").replace("effs.wrathCookieGain+=0.01*mult;effs.wrathCookieFreq+=0.01*mult;","eff.wrinklerApproach*=1-0.02*mult; eff.haltPower+=0.01*mult;").replace("effs.goldenCookieGain+=0.01*mult;effs.goldenCookieFreq+=0.01*mult;effs.itemDrops+=0.01*mult;","effs.decayRate *= 1 - 0.02; effs.decayMomentum *= 1 - 0.02;").replace("effs.goldenCookieGain+=0.01*mult;effs.goldenCookieEffDur+=0.001*mult;","effs.goldenCookieGain+=3.89*mult;effs.goldenCookieEffDur+=0.001*mult;").replace("'shriekbulb') {effs.cps*=1-0.02*mult;}","'shriekbulb') {effs.cps*=1-0.02*mult;} else if (name=='tidygrass') { effs.decayMomentum *= 1 - 0.05; } else if (name=='everdaisy') { effs.decayRate *= 1 - 0.03; }")),addLoc("all decay-halting sources' effect"),addLoc("wrath cookies replacement"),addLoc("wrinklers approach speed"),addLoc("decay-halting power"),addLoc("decay rates"),addLoc("decay momentum"),addLoc("decay propagation"),M.plants.wardlichen.effsStr='<div class="green">&bull; '+loc("all decay-halting sources' effect")+' +2%</div><div class="gray">&bull; '+loc("wrath cookies replacement")+" -2%</div>",M.plants.wrinklegill.effsStr='<div class="green">&bull; '+loc("wrinklers approach speed")+" -5%</div>",M.plants.elderwort.effsStr='<div class="green">&bull; '+loc("wrinklers approach speed")+' -2%</div><div class="green">&bull; '+loc("all decay-halting source' effect")+' +1%</div><div class="green">&bull; '+loc("%1 CpS",Game.Objects.Grandma.single)+' +1%</div><div class="green">&bull; '+loc("immortal")+'</div><div class="gray">&bull; '+loc("surrounding plants (%1x%1) age %2% faster",[3,3])+"</div>",M.plants.shimmerlily.effsStr='<div class="green">&bull; '+loc("decay propagation")+" -2%</div>",M.plants.gildmillet.effsStr='<div class="green">&bull; '+loc("golden cookie gains")+' +389%</div><div class="green">&bull; '+loc("golden cookie effect duration")+" +0.1%</div>",M.plants.tidygrass.effsStr='<div class="green">&bull; '+loc("surrounding tiles (%1x%1) develop no weeds or fungus",5)+'</div><div class="green">&bull; '+loc("decay momentum")+" -5%</div>",M.plants.everdaisy.effsStr='<div class="green">&bull; '+loc("surrounding tiles (%1x%1) develop no weeds or fungus",3)+'</div><div class="green">&bull; '+loc("decay rates")+' -3%</div><div class="green">&bull; '+loc("immortal")+"</div>",eval("M.tools['info'].descFunc="+M.tools.info.descFunc.toString().replace("buildingCost:{n:'building costs',rev:true},","buildingCost:{n:'building costs',rev:true}, wrinklerApproach:{n:'wrinklers approach speed'}, wrathReplace:{n:'wrath cookies replacement'}, haltPower:{n:'decay-halting power'}")),gardenUpdated=!0}})),new Game.buffType("haggler dream",(function(e,a){return{name:"Hagglers dream",desc:loc("+20% prestige level effect on CpS for 20 seconds!",[a,Game.sayTime(e*Game.fps,-1)]),icon:[19,7],time:e*Game.fps,multCpS:a,aura:1}})),eval("Game.GetHeavenlyMultiplier="+Game.GetHeavenlyMultiplier.toString().replace("if (Game.Has('Lucky payout')) heavenlyMult*=1.01;","if (Game.Has('Lucky payout')) heavenlyMult*=1.01; if (Game.hasBuff('haggler dream')) heavenlyMult*=1.20;")),Game.registerHook("check",(()=>{Game.Objects["Wizard tower"].minigameLoaded&&(eval("Game.Objects['Wizard tower'].minigame.spells['conjure baked goods'].win="+Game.Objects["Wizard tower"].minigame.spells["conjure baked goods"].win.toString().replace("Game.Earn(val);","var buff = Game.gainBuff('haggler dream', 60, 2);")),eval("Game.Objects['Wizard tower'].minigame.spells['conjure baked goods'].win="+Game.Objects["Wizard tower"].minigame.spells["conjure baked goods"].win.toString().replace('Game.Popup(\'<div style="font-size:80%;">\'+loc("+%1!",loc("%1 cookie",LBeautify(val)))+\'</div>\',Game.mouseX,Game.mouseY);',"Game.Popup('<div style=\"font-size:80%;\">'+loc(\"Heavenly chips are stronger!\")+'</div>',Game.mouseX,Game.mouseY);")),eval("Game.Objects['Wizard tower'].minigame.spells['conjure baked goods'].win="+Game.Objects["Wizard tower"].minigame.spells["conjure baked goods"].win.toString().replace('Game.Notify(loc("Conjure Baked Goods")+(EN?\'!\':\'\'),loc("You magic <b>%1</b> out of thin air.",loc("%1 cookie",LBeautify(val))),[21,11],6);','Game.Notify(loc("Conjure Baked Goods")+(EN?\'!\':\'\'),loc("Your heavenly chips are stronger.",loc("")),[21,11],6);')),eval("Game.Objects['Wizard tower'].minigame.spells['conjure baked goods'].fail="+Game.Objects["Wizard tower"].minigame.spells["conjure baked goods"].fail.toString().replace("var val=Math.min(Game.cookies*0.15,Game.cookiesPs*60*15)+13;","var val=Math.min(Game.cookies*0.5)+13;")),addLoc("+%1% prestige level effect on CpS for 20 seconds."),addLoc("Trigger a %1-minute clot and lose %2% of your cookies owned."),Game.Objects["Wizard tower"].minigame.spells["conjure baked goods"].desc=loc("+%1% prestige level effect on CpS for 20 seconds.",20),Game.Objects["Wizard tower"].minigame.spells["conjure baked goods"].failDesc=loc("Trigger a %1-minute clot and lose %2% of your cookies owned.",[15,50]))})),allValues("other minigame (no pantheon)"),eval("Game.mouseCps="+Game.mouseCps.toString().replace("if (Game.Has('Unshackled cursors')) add*=\t25;","if (Game.Has('Unshackled cursors')) add*=\t20;")),eval("Game.Objects['Cursor'].cps="+Game.Objects.Cursor.cps.toString().replace("if (Game.Has('Unshackled cursors')) add*=\t25;","if (Game.Has('Unshackled cursors')) add*=\t20;"));var getStrThousandFingersGain=function(e){return loc("Multiplies the gain from %1 by <b>%2</b>.",[getUpgradeName("Thousand fingers"),e])};for(var i in Game.Upgrades["Unshackled cursors"].baseDesc=getStrThousandFingersGain(20)+"<q>These hands tell a story.</q>",eval("Game.GetTieredCpsMult="+Game.GetTieredCpsMult.toString().replace("tierMult+=me.id==1?0.5:(20-me.id)*0.1;","tierMult+=me.id==1?0.45:(20-me.id)*0.09;")),Game.Objects)for(var ii in Game.Objects[i].tieredUpgrades){var me=Game.Objects[i].tieredUpgrades[ii];"fortune"!=ii&&me.descFunc&&eval("me.descFunc="+me.descFunc.toString().replace("this.buildingTie.id==1?0.5:(20-this.buildingTie.id)*0.1)*100","this.buildingTie.id==1?0.45:(20-this.buildingTie.id)*0.09)*100"))}for(var i in Game.Objects){var s=Game.Upgrades["Unshackled "+Game.Objects[i].plural],id=Game.Objects[i].id;"Cursor"!=i&&(s.baseDesc=s.baseDesc.replace(s.baseDesc.slice(0,s.baseDesc.indexOf("<q>")),"Tiered upgrades for <b>"+i+"</b> provide an extra <b>"+(1==id?"45":9*(20-id))+"%</b> production.<br>Only works with unshackled upgrade tiers."))}Game.registerHook("check",(function(){Game.goldenClicks>=1&&Game.Unlock("Lucky day"),Game.goldenClicks>=3&&Game.Unlock("Serendipity"),Game.goldenClicks>=7&&Game.Unlock("Get lucky")})),Game.Upgrades["Pure heart biscuits"].basePrice*=1,cookieChange("Pure heart biscuits",4),Game.Upgrades["Ardent heart biscuits"].basePrice*=1e8,cookieChange("Ardent heart biscuits",5),Game.Upgrades["Sour heart biscuits"].basePrice*=1e16,cookieChange("Sour heart biscuits",6),Game.Upgrades["Weeping heart biscuits"].basePrice*=1e24,cookieChange("Weeping heart biscuits",7),Game.Upgrades["Golden heart biscuits"].basePrice*=1e32,cookieChange("Golden heart biscuits",8),Game.Upgrades["Eternal heart biscuits"].basePrice*=1e40,cookieChange("Eternal heart biscuits",9),Game.Upgrades["Prism heart biscuits"].basePrice*=1e48,cookieChange("Prism heart biscuits",10),Game.Upgrades["Wrinkly cookies"].power=15,Game.Upgrades["Wrinkly cookies"].baseDesc=loc("Cookie production multiplier <b>+%1% permanently</b>.",15)+"<q>The result of regular cookies left to age out for countless eons in a place where time and space are meaningless.</q>",eval("Game.CalculateGains="+Game.CalculateGains.toString().replace("milkMult*=1+Game.auraMult('Breath of Milk')*0.05;","milkMult*=1+Game.auraMult('Breath of Milk')*0.025;")),eval("Game.CalculateGains="+Game.CalculateGains.toString().replace("mult*=1+Game.auraMult('Radiant Appetite');","mult*=0.5+Game.auraMult('Radiant Appetite');")),eval("Game.Upgrade.prototype.getPrice="+Game.Upgrade.prototype.getPrice.toString().replace("price*=1-Game.auraMult('Master of the Armory')*0.02;","price*=1-Game.auraMult('Master of the Armory')*0.10;")),eval("Game.modifyBuildingPrice="+Game.modifyBuildingPrice.toString().replace("price*=1-Game.auraMult('Fierce Hoarder')*0.02;","price*=1-Game.auraMult('Fierce Hoarder')*0.05;")),eval("Game.shimmerTypes['golden'].popFunc="+Game.shimmerTypes.golden.popFunc.toString().replace("buff=Game.gainBuff('click frenzy',Math.ceil(13*effectDurMod),777);","buff=Game.gainBuff('click frenzy',Math.ceil(13*effectDurMod),777*(1+(Game.auraMult('Dragon Cursor')*0.5)));")),eval("Game.shimmerTypes['golden'].popFunc="+Game.shimmerTypes.golden.popFunc.toString().replace("buff=Game.gainBuff('dragonflight',Math.ceil(10*effectDurMod),1111);","buff=Game.gainBuff('dragonflight',Math.ceil(10*effectDurMod),1111*(1+(Game.auraMult('Dragon Cursor')*0.5)));")),eval("Game.shimmerTypes['golden'].popFunc="+Game.shimmerTypes.golden.popFunc.toString().replace("list.push('blood frenzy','chain cookie','cookie storm');","{ list.push('blood frenzy','chain cookie','cookie storm'); for (let i = 0; i < randomFloor(Game.auraMult('Unholy Dominion') * 4); i++) { list.push('blood frenzy'); } }")),eval("Game.GetHeavenlyMultiplier="+Game.GetHeavenlyMultiplier.toString().replace("heavenlyMult*=1+Game.auraMult('Dragon God')*0.05;","heavenlyMult*=1+Game.auraMult('Dragon God')*0.20;")),eval("Game.shimmerTypes['golden'].popFunc="+Game.shimmerTypes.golden.popFunc.toString().replace("if (Math.random()<Game.auraMult('Dragonflight')) list.push('dragonflight');","if (Math.random()<Game.auraMult('Dragonflight')) list.push('dragonflight'); if (Math.random()<Game.auraMult('Ancestral Metamorphosis')) { for (let i = 0; i < 10; i++) { list.push('Ancestral Metamorphosis'); } }")),eval("Game.shimmerTypes['golden'].popFunc="+Game.shimmerTypes.golden.popFunc.toString().replace("else if (choice=='blood frenzy')","else if (choice=='Ancestral Metamorphosis')\n        {\n\t\t\tvar valn=Math.max(7,Math.min(Game.cookies*1.0,Game.cookiesPs*60*60*24))*Game.eff('goldenCookieGain');\n\t\t\tGame.Earn(valn);\n\t\t\tpopup=loc(\"Dragon's hoard!\")+'<br><small>'+loc(\"+%1!\",loc(\"%1 cookie\",LBeautify(valn)))+'</small>';\n        }else if (choice=='blood frenzy')")),eval('Game.shimmerTypes["golden"].getTimeMod='+Game.shimmerTypes.golden.getTimeMod.toString().replace("m*=1-Game.auraMult('Arcane Aura')*0.05;","m*=((1 + Game.auraMult('Arcane Aura') * 1.25) - Game.auraMult('Arcane Aura') * 1.25 * Math.pow(0.975, Math.log2(1 / Math.min(1, decay.gen))));")),eval('Game.shimmerTypes["golden"].getTimeMod='+Game.shimmerTypes.golden.getTimeMod.toString().replace("if (Game.hasBuff('Sugar blessing')) m*=0.9;","if (Game.hasBuff('Sugar blessing')) { m*=0.9; } m*=((1 + Game.auraMult('Master of the Armory') * 0.6) - Game.auraMult('Master of the Armory') * 0.6 * Math.pow(0.99, Math.log(Math.max(1, decay.gen)) / Math.log(1.02)));")),eval("Game.SelectDragonAura="+Game.SelectDragonAura.toString().replace("Game.ToggleSpecialMenu(1);","Game.ToggleSpecialMenu(1); decay.setRates();")),auraDesc(2,"Clicking is <b>5%</b> more powerful.<br>Click frenzy and Dragonflight is <b>50%</b> more powerful."),auraDesc(5,"Buildings sell back for <b>50%</b> instead of 25% of their cost. <br>Selling buildings <b>halts decay</b> temporarily based on the cube root of the amount of buildings sold."),auraDesc(6,"Get <b>1%</b> (multiplicative) closer to <b>+60%</b> golden cookie frequency for each <b>x1.02</b> CpS multiplier from your purity.<br>(Note: this effect reduces the initial amount of time on Golden cookie click)"),auraDesc(7,"While not purifying decay, you accumulate <b>purification power</b> that will be spent in the next purification; the banked purification power is kept even when this aura is off."),auraDesc(8,"<b>+20%</b> prestige level effect on CpS.<br>Wrinklers approach the big cookie <b>3 times</b> slower."),auraDesc(9,"Get <b>2.5%</b> (multiplicative) closer to <b>+125%</b> Golden cookie frequency for each <b>x0.5</b> CpS multiplier from your decay.<br>(Note: this effect reduces the initial amount of time on Golden cookie click)"),auraDesc(11,"Golden cookies give <b>10%</b> more cookies.<br>Golden cookies may trigger a <b>Dragon's hoard</b>."),auraDesc(12,"Wrath cookies give <b>10%</b> more cookies.<br>Elder frenzy from Wrath cookies appear <b>4x as often</b>."),auraDesc(13,"Having purity now makes positive buffs run out slower, for up to <b>-50%</b> buff duration decrease rate. Decay is less effective against buff duration."),auraDesc(15,"All cookie production <b>multiplied by 1.5</b>."),auraDesc(21,"Wrinklers no longer withers any CpS, but popping wrinklers no longer slow down decay."),allValues("auras");var secondGrimoireDone=!1;Game.registerHook("check",(()=>{if(Game.Objects["Wizard tower"].minigameLoaded&&!secondGrimoireDone){var grimoire=Game.Objects["Wizard tower"].minigame;if(null===l("grimoireInfo"))return!1;grimoire.spells["hand of fate"].failFunc=function(e){return e+.3*Game.shimmerTypes.golden.n},Game.Objects["Wizard tower"].minigame.spells["hand of fate"].desc=loc("Summon a random golden cookie. Each existing golden cookie makes this spell +%1% more likely to backfire.",30),eval("Game.Objects['Wizard tower'].minigame.spells['hand of fate'].win="+Game.Objects["Wizard tower"].minigame.spells["hand of fate"].win.toString().replace("//if (Math.random()<0.2) choices.push('clot','cursed finger','ruin cookies');","if (Math.random()<0.2) choices.push('clot','cursed finger','ruin cookies');")),eval("Game.Objects['Wizard tower'].minigame.spells['hand of fate'].win="+Game.Objects["Wizard tower"].minigame.spells["hand of fate"].win.toString().replace("if (Game.BuildingsOwned>=10 && Math.random()<0.25) choices.push('building special');","if (Game.BuildingsOwned>=10 && Math.random()<0.10) choices.push('building special');")),secondGrimoireDone=!0}})),eval("Game.shimmerTypes['golden'].popFunc="+Game.shimmerTypes.golden.popFunc.toString().replace("if (Math.random()<0.8) Game.killBuff('Click frenzy');","Game.killBuff('Click frenzy');")),eval("Game.shimmerTypes['golden'].popFunc="+Game.shimmerTypes.golden.popFunc.toString().replace("Game.ObjectsById[obj].amount/10+1;","Game.ObjectsById[obj].amount/1;")),eval("Game.mouseCps="+Game.mouseCps.toString().replace("if (godLvl==1) mult*=1.15;","if (godLvl==1) mult*=1.25;")),eval("Game.mouseCps="+Game.mouseCps.toString().replace("else if (godLvl==2) mult*=1.20;","else if (godLvl==2) mult*=1.20;")),eval("Game.mouseCps="+Game.mouseCps.toString().replace("else if (godLvl==3) mult*=1.1;","else if (godLvl==3) mult*=1.15;")),eval("Game.CalculateGains="+Game.CalculateGains.toString().replace("if (godLvl==1) milkMult*=1.1;","if (godLvl==1) milkMult*=1.08;")),eval("Game.CalculateGains="+Game.CalculateGains.toString().replace("else if (godLvl==2) milkMult*=1.05;","else if (godLvl==2) milkMult*=1.04;")),eval("Game.CalculateGains="+Game.CalculateGains.toString().replace("else if (godLvl==3) milkMult*=1.03;","else if (godLvl==3) milkMult*=1.02;")),eval('Game.shimmerTypes["golden"].getTimeMod='+Game.shimmerTypes.golden.getTimeMod.toString().replace("if (godLvl==1) m*=1.15;","if (godLvl==1) m*=1.20;")),eval('Game.shimmerTypes["golden"].getTimeMod='+Game.shimmerTypes.golden.getTimeMod.toString().replace("else if (godLvl==2) m*=1.1;","else if (godLvl==2) m*=1.15;")),eval('Game.shimmerTypes["golden"].getTimeMod='+Game.shimmerTypes.golden.getTimeMod.toString().replace("else if (godLvl==3) m*=1.05;","else if (godLvl==3) m*=1.1;")),eval("Game.CalculateGains="+Game.CalculateGains.toString().replace("if (godLvl==1) buildMult*=1.1;","if (godLvl==1) buildMult*=1.2;")),eval("Game.CalculateGains="+Game.CalculateGains.toString().replace("else if (godLvl==2) buildMult*=1.06;","else if (godLvl==2) buildMult*=1.14;")),eval("Game.CalculateGains="+Game.CalculateGains.toString().replace("else if (godLvl==3) buildMult*=1.03;","else if (godLvl==3) buildMult*=1.08;")),eval('Game.shimmerTypes["golden"].getTimeMod='+Game.shimmerTypes.golden.getTimeMod.toString().replace("if (godLvl==1) m*=1.1;","if (godLvl==1) m*=1.06;").replace("else if (godLvl==2) m*=1.06;","else if (godLvl==2) m*=1.04;").replace("else if (godLvl==3) m*=1.03;","else if (godLvl==3) m*=1.02;")),eval("Game.CalculateGains="+Game.CalculateGains.toString().replace("if (godLvl==1) mult*=0.15*Math.sin((Date.now()/1000/(60*60*3))*Math.PI*2);","if (godLvl==1) mult*=1+0.15*Math.sin((Date.now()/1000/(60*60*12))*Math.PI*2);")),eval("Game.CalculateGains="+Game.CalculateGains.toString().replace("else if (godLvl==2) mult*=1+0.15*Math.sin((Date.now()/1000/(60*60*12))*Math.PI*2);","else if (godLvl==2) mult*=1+0.15*Math.sin((Date.now()/1000/(60*60*24))*Math.PI*2);")),eval("Game.CalculateGains="+Game.CalculateGains.toString().replace("else if (godLvl==3) mult*=1+0.15*Math.sin((Date.now()/1000/(60*60*24))*Math.PI*2);","else if (godLvl==3) mult*=1+0.15*Math.sin((Date.now()/1000/(60*60*48))*Math.PI*2);")),eval('Game.shimmerTypes["golden"].initFunc='+Game.shimmerTypes.golden.initFunc.toString().replace("(Game.hasGod && Game.hasGod('scorn'))","false")),eval("Game.GetHeavenlyMultiplier="+Game.GetHeavenlyMultiplier.toString().replace("Game.hasGod","false")),eval("Game.modifyBuildingPrice="+Game.modifyBuildingPrice.toString().replace("Game.hasGod","false"));for(let i in Game.Objects)eval('Game.Objects["'+i+'"].sell='+Game.Objects[i].sell.toString().replace("if (godLvl==1) Game.gainBuff('devastation',10,1+sold*0.01);","if (godLvl==1) Game.gainBuff('devastation',10,1+sold*0.01,1+sold*0.01);").replace("else if (godLvl==2) Game.gainBuff('devastation',10,1+sold*0.005);","else if (godLvl==2) Game.gainBuff('devastation',10,1+sold*0.005,1+sold*0.004);").replace("else if (godLvl==3) Game.gainBuff('devastation',10,1+sold*0.0025);","else if (godLvl==3) Game.gainBuff('devastation',10,1+sold*0.0025,1+sold*0.0015);").replace("if (success && Game.hasGod)",'if (success && Game.auraMult("Earth Shatterer")) { decay.stop(Math.pow(sold, 1 / 3) * Game.auraMult("Earth Shatterer") * 1); } if (success && Game.hasGod)'));addLoc("Buff boosts clicks by +%1% for every building sold for %2 seconds, "),addLoc("but also temporarily increases decay momentum by %1% with every building sold."),Game.registerHook("check",(()=>{if(Game.Objects.Temple.minigameLoaded&&!pantheonUpdated){var temp=Game.Objects.Temple.minigame;if(null===l("templeInfo"))return!1;decay.prefs.preventNotifs.momentum||decay.triggerNotif("momentum"),decay.triggerNotif("boost"),pp=temp,eval("pp.logic="+replaceAll("M.","pp.",pp.logic.toString())),eval("pp.logic="+pp.logic.toString().replace("t=1000*60*60","t=1000*5*60").replace("t=1000*60*60*16","t=1000*60*60").replace("t=1000*60*60*4","t=1000*60*20")),eval("pp.draw="+replaceAll("M.","pp.",pp.draw.toString())),eval("pp.draw="+pp.draw.toString().replace("t=1000*60*60","t=1000*5*60").replace("t=1000*60*60*16","t=1000*60*60").replace("t=1000*60*60*4","t=1000*60*20")),l("templeInfo").innerHTML="<div "+Game.getDynamicTooltip("Game.ObjectsById["+pp.parent.id+"].minigame.refillTooltip","this")+' id="templeLumpRefill" class="usesIcon shadowFilter lumpRefill" style="left:-6px;top:-10px;background-position:'+"-1392px "+'-672px;"></div><div id="templeSwaps" '+Game.getTooltip('<div style="padding:8px;width:350px;font-size:11px;text-align:center;">'+loc('Each time you slot a spirit, you use up one worship swap.<div class="line"></div>If you have 2 swaps left, the next one will refill after %1.<br>If you have 1 swap left, the next one will refill after %2.<br>If you have 0 swaps left, you will get one after %3.<div class="line"></div>Unslotting a spirit costs no swaps.',[Game.sayTime(300*Game.fps),Game.sayTime(1200*Game.fps),Game.sayTime(4800*Game.fps)])+"</div>")+">-</div>",pp.swapsL=l("templeSwaps"),temp.gods.ruin.desc1='<span class="green">'+loc("Buff boosts clicks by +%1% for every building sold for %2 seconds, ",[1,10])+'</span> <span class="red">'+loc("but also temporarily increases decay momentum by %1% with every building sold.",[1])+"</span>",temp.gods.ruin.desc2='<span class="green">'+loc("Buff boosts clicks by +%1% for every building sold for %2 seconds, ",[.5,10])+'</span> <span class="red">'+loc("but also temporarily increases decay momentum by %1% with every building sold.",[.4])+"</span>",temp.gods.ruin.desc3='<span class="green">'+loc("Buff boosts clicks by +%1% for every building sold for %2 seconds, ",[.25,10])+'</span> <span class="red">'+loc("but also temporarily increases decay momentum by %1% with every building sold.",[.15])+"</span>",temp.gods.mother.desc1='<span class="green">'+loc("Milk is <b>%1% more powerful</b>.",8)+'</span> <span class="red">'+loc("Golden and wrath cookies appear %1% less.",20)+"</span>",temp.gods.mother.desc2='<span class="green">'+loc("Milk is <b>%1% more powerful</b>.",4)+'</span> <span class="red">'+loc("Golden and wrath cookies appear %1% less.",15)+"</span>",temp.gods.mother.desc3='<span class="green">'+loc("Milk is <b>%1% more powerful</b>.",2)+'</span> <span class="red">'+loc("Golden and wrath cookies appear %1% less.",10)+"</span>",temp.gods.labor.desc1='<span class="green">'+loc("Clicking is <b>%1%</b> more powerful.",25)+'</span> <span class="red">'+loc("Buildings produce %1% less.",3)+"</span>",temp.gods.labor.desc2='<span class="green">'+loc("Clicking is <b>%1%</b> more powerful.",20)+'</span> <span class="red">'+loc("Buildings produce %1% less.",2)+"</span>",temp.gods.labor.desc3='<span class="green">'+loc("Clicking is <b>%1%</b> more powerful.",15)+'</span> <span class="red">'+loc("Buildings produce %1% less.",1)+"</span>",temp.gods.ages.desc1=loc("Effect cycles over %1 hours.",12),temp.gods.ages.desc2=loc("Effect cycles over %1 hours.",24),temp.gods.ages.desc3=loc("Effect cycles over %1 hours.",48),temp.gods.industry.desc1='<span class="green">'+loc("Buildings produce %1% more.",20)+'</span> <span class="red">'+loc("Golden and wrath cookies appear %1% less.",6)+"</span>",temp.gods.industry.desc2='<span class="green">'+loc("Buildings produce %1% more.",14)+'</span> <span class="red">'+loc("Golden and wrath cookies appear %1% less.",4)+"</span>",temp.gods.industry.desc3='<span class="green">'+loc("Buildings produce %1% more.",8)+'</span> <span class="red">'+loc("Golden and wrath cookies appear %1% less.",2)+"</span>",addLoc("Wrinkler spawning requires %1x more decay."),addLoc("Wrath cookies replaces Golden cookies with %1% less decay."),temp.gods.scorn.desc1='<span class="green">'+loc("Wrinkler spawning requires %1x more decay.",4)+'</span> <span class="red">'+loc("Wrath cookies replaces Golden cookies with %1% less decay.",50),temp.gods.scorn.desc2='<span class="green">'+loc("Wrinkler spawning requires %1x more decay.",3)+'</span> <span class="red">'+loc("Wrath cookies replaces Golden cookies with %1% less decay.",33),temp.gods.scorn.desc3='<span class="green">'+loc("Wrinkler spawning requires %1x more decay.",2)+'</span> <span class="red">'+loc("Wrath cookies replaces Golden cookies with %1% less decay.",20),delete temp.gods.scorn.descBefore,addLoc("Purifying decay grants a buff."),addLoc("-%1% decay for %2 seconds."),addLoc("Purifying decay grants a buff that weakens decay propagation."),temp.gods.creation.descBefore='<span class="green">'+loc("Purifying decay grants a buff that weakens decay propagation.")+"</span>",temp.gods.creation.desc1='<span class="green">'+loc("-%1% decay for %2 seconds.",[48,4])+"</span>",temp.gods.creation.desc2='<span class="green">'+loc("-%1% decay for %2 seconds.",[24,16])+"</span>",temp.gods.creation.desc3='<span class="green">'+loc("-%1% decay for %2 seconds.",[12,64])+"</span>",addLoc("Decay propagation rate -%1%."),temp.gods.asceticism.desc1='<span class="green">'+loc("+%1% base CpS.",15)+" "+loc("Decay propagation rate -%1%.",30)+"</span>",temp.gods.asceticism.desc2='<span class="green">'+loc("+%1% base CpS.",10)+" "+loc("Decay propagation rate -%1%.",20)+"</span>",temp.gods.asceticism.desc3='<span class="green">'+loc("+%1% base CpS.",5)+" "+loc("Decay propagation rate -%1%.",10)+"</span>",eval("temp.gods['ages'].activeDescFunc="+Game.Objects.Temple.minigame.gods.ages.activeDescFunc.toString().replace("if (godLvl==1) mult*=0.15*Math.sin((Date.now()/1000/(60*60*3))*Math.PI*2);","if (godLvl==1) mult*=0.15*Math.sin((Date.now()/1000/(60*60*12))*Math.PI*2);")),eval("temp.gods['ages'].activeDescFunc="+Game.Objects.Temple.minigame.gods.ages.activeDescFunc.toString().replace("else if (godLvl==2) mult*=0.15*Math.sin((Date.now()/1000/(60*60*12))*Math.PI*2);","else if (godLvl==2) mult*=0.15*Math.sin((Date.now()/1000/(60*60*24))*Math.PI*2);")),eval("temp.gods['ages'].activeDescFunc="+Game.Objects.Temple.minigame.gods.ages.activeDescFunc.toString().replace("else if (godLvl==3) mult*=0.15*Math.sin((Date.now()/1000/(60*60*24))*Math.PI*2);","else if (godLvl==3) mult*=0.15*Math.sin((Date.now()/1000/(60*60*48))*Math.PI*2);")),eval("temp.slotGod="+replaceAll("M","pp",temp.slotGod.toString())),eval("temp.slotGod="+temp.slotGod.toString().replace("Game.recalculateGains=true;","Game.recalculateGains=true; decay.setRates();")),pantheonUpdated=!0}}));var butterBiscuitMult=1e8;Game.Upgrades["Milk chocolate butter biscuit"].basePrice=1e27*butterBiscuitMult,Game.Upgrades["Dark chocolate butter biscuit"].basePrice=1e30*butterBiscuitMult,Game.Upgrades["White chocolate butter biscuit"].basePrice=1e33*butterBiscuitMult,Game.Upgrades["Ruby chocolate butter biscuit"].basePrice=1e36*butterBiscuitMult,Game.Upgrades["Lavender chocolate butter biscuit"].basePrice=1e39*butterBiscuitMult,Game.Upgrades["Synthetic chocolate green honey butter biscuit"].basePrice=1e42*butterBiscuitMult,Game.Upgrades["Royal raspberry chocolate butter biscuit"].basePrice=1e45*butterBiscuitMult,Game.Upgrades["Ultra-concentrated high-energy chocolate butter biscuit"].basePrice=1e48*butterBiscuitMult,Game.Upgrades["Pure pitch-black chocolate butter biscuit"].basePrice=1e51*butterBiscuitMult,Game.Upgrades["Cosmic chocolate butter biscuit"].basePrice=1e54*butterBiscuitMult,Game.Upgrades["Butter biscuit (with butter)"].basePrice=1e57*butterBiscuitMult,Game.Upgrades["Everybutter biscuit"].basePrice=1e60*butterBiscuitMult,Game.Upgrades["Personal biscuit"].basePrice=1e63*butterBiscuitMult,allValues("pantheon"),decay.getNews=function(){var e=[],a=Game.bakeryName;1==Game.elderWrath&&e.push(choose(["News : the elders are rioting, they are destroying a nearby factory!"])),decay.incMult>.05&&(e=e.concat(["News: Decay rates spreading linked to global warming, says expert."])),Game.Objects.Cursor.amount>25&&(e=e.concat(["News: Why are the cursors getting so big? What is the meaning of this?"])),Game.Objects.Cursor.amount>50&&(e=e.concat(["News: what if, instead of having more fingers, we just made them click harder?","News: cookies and cursors-storing warehouses found to be made of 99.8% fingers and 0.2% cookies, causing massive riots."])),Game.Objects.Cursor.amount>100&&(e=e.concat(['News: new "Million fingered" variety Cursors found to be the cause of death for several infants!',"News: finger-cutting jobs open for hire! Starting rate at fingers per hour!"]));var t=Game.Objects.Grandma.amount;Game.Objects.Grandma.amount>25&&(e=e.concat(['News: analysis shows a possible type of grandmas opposite to that of normal grandmas, just like antimatter. Experts have coined it "grandpas".',"News: analysis shows that every year, on average, each grandma is getting "+Beautify(1+Math.pow(t,2)*Game.Has("One mind")+Math.pow(t,4)*Game.Has("Communal brainsweep")+Math.pow(t,7)*Game.Has("Elder Pact"))+"% bigger."])),Game.Objects.Grandma.amount>50&&(e=e.concat(['AMBER ALERT: GRANDMA GONE MISSING. REPORT ANY POSSIBLE SIGHTINGS OF GRANDMA "'+choose(Game.grandmaNames).toUpperCase()+'" TO THE LOCAL AUTHORITY.',"SCIENTIFIC BREAKTHROUGH! Our top scientists just discovered that each grandma ages 1 year per year!"])),Game.Objects.Grandma.amount>100&&(e=e.concat(['<i>"No."</i><sig>grandma</sig>','<i>"It is not our fault."</i><sig>grandma</sig>'])),Game.Objects.Farm.amount>0&&(e=e.concat(['News : local cookie manufacturer grows "Mother of beets"; Farmers outraged by root entanglement strategy.','News: Maniac spurts about "Pizza": locals confused, it sounds like a giant red cookie.'])),Game.Objects.Farm.amount>25&&(e=e.concat(["News: a new law has been introduced that limited the stem length of all cookie plants to a maximum of 1 m.","News: local cookie manufacturer have started using the sun to grow cookie plants."])),Game.Objects.Farm.amount>50&&(e=e.concat(["News: storage out of control! Cookie plants are dying after a recent invasion of cookies that broke through the greenhouse roof; officials blame the warehouse construction company."])),Game.Objects.Farm.amount>100&&(e=e.concat(["News: experts suggest that cookies from cookie plants are unsafe to eat if not heated to at least 6,000,000 celsius.","News: farmers report difficulty distinguishing between the cookies on the cookie plants and all the cookies around them.","News: another farmer dies from suffocation."])),Game.Objects.Mine.amount>25&&(e=e.concat(['News: interdimensional portals within cookie mineshafts have been discovered that leads to "Earth". The mineshaft is now permanently closed.'])),Game.Objects.Mine.amount>50&&(e=e.concat(["News: cookie mineshafts are closing up in order to become storage for the ever-growing pile of cookies."])),Game.Objects.Mine.amount>100&&(e=e.concat(["News: I'm not sure what's in those underground tunnels, it's not like those tunnels are mine."])),Game.Objects.Factory.amount>25&&(e=e.concat(["News: your Factories are now producing as much as cookies as before."])),Game.Objects.Factory.amount>50&&(e=e.concat(["News: Factories going awry after the mechanical failure of the cookie output, factory now filled with cookies & possibly will become a cookie volcano in the next hour!"])),Game.Objects.Factory.amount>100&&(e=e.concat(["News: new legislation suggests that all cookie-producing Factories be repurposed to "+(Game.Objects.Factory.amount>250?"planet":"warehouse")+"-producing factories."])),Game.Objects.Bank.amount>25&&(e=e.concat(['News: economists worldwide predict imminent economic collapse, saying that "if cookie prices ever drop below 1e-'+Math.floor(Math.max(Math.log10(Game.cookiesEarned)-2,0))+'..."'])),Game.Objects.Bank.amount>50&&(e=e.concat(["News: it currently costs 10 cookies to store 3 cookies. Because of this, your banks are closing up."])),Game.Objects.Bank.amount>100&&(e=e.concat(["News: IN THIS ECONOMY??","News: stock prices reach record highs after the destruction of the Great Space Cookie Patch! Traders hail in delight!"])),Game.Objects["Antimatter condenser"].amount>25&&(e=e.concat(['News: As it turns out, there is 1e200,405,192,204 times more antimatter than matter. Expert found cause to be "dimensions", whatever that means.','News: Experts advise against turning antimatter to cookies, reason being "there is already way too much cookies, and antimatter can help clear out some cookies"'])),Game.Objects["Antimatter condenser"].amount>50&&(e=e.concat(["News: if there is so much cookies, why is there so little anticookies?"])),Game.Objects["Antimatter condenser"].amount>100&&(e=e.concat(["[news destroyed by antimatter]","?secnetnesitna eht era erehw ,secnetnes hcum os si ereht fi :sewN"])),Game.Objects.Prism.amount>25&&(e=e.concat(["News: Prisms are starting to exclusively use gamma rays to produce the smallest cookies possible."])),Game.Objects.Prism.amount>50&&(e=e.concat(["News: Prisms encounter issues outputting light, found cause to be cookies blocking the window! Officials will drop the next nuke tomorrow at 5:30, hopefully that'll clear it up a bit more."])),Game.Objects.Prism.amount>100&&(e=e.concat(["News: can we turn cookies back into light? Please?"])),Game.Objects.Chancemaker.amount>25&&(e=e.concat(["News: it is considered lucky if the Chancemakers don't produce any cookies."])),Game.Objects.Chancemaker.amount>50&&(e=e.concat(['News: experts are considering the "quantom dislocation" optimization, wonders if the Chancemakers are powerful enough to dislocate a mass of cookies of 1,123,901,284 light years cubed.'])),Game.Objects.Chancemaker.amount>100&&(e=e.concat(["News: you will see this news because RNG said yes.","News: is the eyeballs really necessary? Experts consider removing one eyeball from each Chancemaker to save space to store more cookies."])),Game.Objects["Fractal engine"].amount>25&&(e=e.concat(["News: Fractal engines are now forbidden to replicate into an exact copy of itself. "])),Game.Objects["Fractal engine"].amount>50&&(e=e.concat(["News: Fractal engines are now forbidden to replicate into an exact copy of itself. News: Fractal engines are now forbidden to replicate into an exact copy of itself. ","News: Fractal engines are encountering difficulty replicating. Experts are working hard to figure out where they are amongst the mass of cookies."])),Game.Objects["Fractal engine"].amount>100&&(e=e.concat(["News: Fractal engines are now forbidden to replicate into an exact copy of itself. News: Fractal engines are now forbidden to replicate into an exact copy of itself. News: Fractal engines are now forbidden to replicate into an exact copy of itself. News: Fractal engines are now forbidden to replicate into an exact copy of itself. Wait, we also can't?","News: No, Fractal engines can't replicate into a larger copy of itself, either."]));var i=["q","w","e","r","t","y","u","i","o","p","a","s","d","f","g","h","j","k","l","z","x","c","v","b","n","m","1","2","3","4","5","6","7","8","9","0","Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Z","X","C","V","B","N","M"];Game.Objects["Javascript console"].amount>25&&(e=e.concat(['News: if (me.when == "change code") { console.log(NaN); }','News: programmers complain that they "can\'t see a thing" after using the new "all-natural sunlight" displays.'])),Game.Objects["Javascript console"].amount>50&&(e=e.concat(["News: this code is too unsightreadable.","undefined","News: "+function(e){var a="";for(let t=0;t<e;t++)a+=choose(i);return a}(Math.floor(70*Math.random())+1)])),Game.Objects["Javascript console"].amount>100&&Game.Objects["Time machine"].amount>0&&(e=e.concat(["News: price of LED skyrockets with the introduction of 1e18 x 1.8e18 wide screens.","News: is it really necessary to write code with indent size 8?","News: the source of the Great Cookie Space Patch has been attributed to the overuse of Javascript Consoles that take up too much space."])),Game.Objects.Idleverse.amount>25&&(e=e.concat(['News: experts question the appropriateness of the name "Idleverse", suggesting that they should be renamed to "Activeverse".'])),Game.Objects.Idleverse.amount>50&&(e=e.concat(['News: Idleverses are being employed as bowling bulbs in recreational facilities. "Where else would you put them?" rhetorically-questions officials.'])),Game.Objects.Idleverse.amount>100&&Game.Objects["Time machine"].amount>0&&(e=e.concat(["News: experts suggest removing at least "+Math.floor(Game.Objects.Idleverse.amount/2)+" Idleverses after a catastrophic Idleverse Chained XK-Collapse scenario. "+a+', being the great baker, simply reverses time. "This will only happen again" warns experts.',"News: is Idleverses even worth keeping? Or should we remove some, so we can have more space to store cookies?","News: scientists within Idleverses predict a Big Crunch to their universes. "])),Game.Objects["Cortex baker"].amount>0&&(e=e.concat(["News: Cortex baker implodes, unknown plant puzzles blamed.",'News: it was discovered that thoughts can have thoughts "that is a tought thing to think"'])),Game.Objects["Cortex baker"].amount>25&&(e=e.concat(["News: You have a big brain."])),Game.Objects["Cortex baker"].amount>50&&(e=e.concat(['News: "Cortex baker galaxy" can be seen during astronomical twilight.',"News: ordinary people found to have seizures after being in the presence of Cortex bakers for more than 1.5 microseconds. Due to space being clogged with wrinkly cookies, officials have no choice but to let them remain near people."])),Game.Objects["Cortex baker"].amount>100&&(e=e.concat(['News: "The mass" Cortex baker cluster 3d9cjk reaches a record high of 1,204,589 congealed Cortex bakers! Experts suggest separating each Cortex Baker by at least 1 more kilometer; officials won\'t budge.','News: Cortex bakers question the morality of thinking cookies into other Cortex bakers; advised to "keep working" even if there is nowhere else to put the cookies.'])),Game.Objects.You.amount>25&&(e=e.concat(['News: local baker "'+a+'" and clones found to be the cause of at least 52,603 human rights violations; 99% of which are due to poor ventilation and overcrowding.',"News: "+a+"'s clones are found to be harmful to philosophy."])),Game.Objects.You.amount>50&&(e=e.concat(["News: Who am I? Where did I come from? Where will I go?"])),Game.Objects.You.amount>100&&(e=e.concat(["News: "+a+"'s clones are beginning to shrink. Experts expect nuclear fusion to occur in the next 4 hours."])),Game.Objects["Wizard tower"].level>10&&e.push(choose(["News : local baker levels wizard towers past level 10, disowned by family."])),Game.Objects.Factory.amount>0&&e.push(choose(["News : competitor involved in destroying equipment scandal."]));var o=[];for(let a in e)Math.random()<.2&&o.push(e[a]);return e=o,Math.random()<.001&&(e.push("<q>JS is the best coding language.</q><sig>no one</sig>"),e.push("News : aleph reference REAL!"),e.push('News : "Say NO to ecm!" said protester.'),e.push('News : person called "rice" fails to execute a "combo", whatever that is.'),e.push("News : ticker broken, please insert another click.")),Math.random()<.01&&(e.push("News : ascend at 365."),e.push('News : Gone too far, or not enough? Protests rising against "intense competition for seemingly boring stuff."'),e.push("News : it was discovered that the "+a+" is actually a-"),e.push('News : Cookie Hermits think of new recipes, locals are shocked: "Taste like grass."'),e.push('News : crazed citizen quits job and leaves family to "grind ascends"'),Game.Has("Cookie egg")&&e.push("<q>Give me food master.</q><sig>krumblor</sig>"),e.push('News : ancient hieroglyphs deciphered to resemble 365 cookies of a heavenly origin. "We\'re not sure what that means," ponder scientists.'),e.push('News : local news stations overrun by suggestions: "Didnt know modding was this annoying."'),e.push("News : you should grail."),e.push("News : encyclopaedia's head editor denies allegations that he is a daddy, says to the public stop calling me that."),e.push('News : hybrid human still keeps to the tradition of calling the head editor "daddy", refuses to take bribes.'),e.push('News : time manipulation growing old for the fiercely competitive baker industry, researchers pursue ways of the future by predicting ahead. "Everything is pre-determined, if you think about it."'),622==Game.AchievementsOwned&&e.push("News : you did it, you can go outside now."),e.push('News : "check the pins" crowned the phrase of the year!'),e.push("nEWS: aLL CAPITAL LETTERS REVERSED IN FREAK MAGIC ACCIDENT!"),e.push('News: Modders make "custom news tickers", public baffled at thought of corruption in the news.'),e.push("News: News: Words Words doubled doubled after after player player purchases purchases a a tiered tiered upgrade upgrade"),e.push('News: 8 disappearances reported in the past minute, officials blame mysterious "white vans" besides "empty fields with weird plants".')),e},Game.registerHook("ticker",decay.getNews),Game.changeNews=function(message,newMessage){eval("Game.getNewTicker="+Game.getNewTicker.toString().replace(message,newMessage))},Game.removeNews=function(message,noComma){var comma=",";noComma&&(comma=""),eval("Game.getNewTicker="+Game.getNewTicker.toString().replace("'"+message+"'"+comma,newMessage))},this.createAchievements=function(){this.achievements=[],this.achievements.push(new Game.Upgrade("Golden sugar","Sugar lumps ripen <b>8 hours</b> sooner.<q>Made from the highest quality sugar!</q>",1e9,[28,16])),this.achievements.push(new Game.Upgrade("Cursedor","Unlocks <b>cursedor</b>, which concentrates and converts your cookies clicked amount this ascension into a golden cookie; the more you clicked, the better effects the golden cookie will yield.<q>Like Russian roulette, but for cookies.</q>",0x18abef7846071c0,[0,1,custImg])),Game.last.pool="prestige",Game.Upgrades.Cursedor.parents=[Game.Upgrades["Luminous gloves"]],Game.PrestigeUpgrades.push(Game.Upgrades.Cursedor),Game.last.posY=-810,Game.last.posX=-144,this.achievements.push(new Game.Upgrade("Cursedor [inactive]","Activating this will spawn a golden cookie based on the amount of times you clicked the big cookie this ascension when you click the big cookie. Upon use, your cookies clicked stat will be reset and the golden cookie spawned yields effects based on the amount it consumed.",0,[0,1,custImg])),Game.last.pool="toggle",Game.last.toggleInto="Cursedor [active]",this.achievements.push(new Game.Upgrade("Cursedor [active]","The Cursor is currently active, and clicking the big cookie will reset your big cookies clicked amount and spawn a golden cookie. <br>Turning it off will revert those effects.</b>",0,[0,1,custImg])),Game.last.pool="toggle",Game.last.toggleInto="Cursedor [inactive]",Game.last.timerDisplay=function(){return Game.Upgrades["Cursedor [inactive]"].bought?1-60*Game.fps*60*60*60*60*60:-1},this.achievements.push(Game.NewUpgradeCookie({name:"The ultimate cookie",desc:'These were made with the purest and highest quality ingredients, legend says: "whom has the cookie they shall become the most powerful baker.". No, this isn\'t just a normal cookie.',icon:[10,0],power:20,price:1e75})),this.achievements.push(new Game.Upgrade("Purity vaccines","<b>Stops all decay.</b><q>Developed for the time of need.</q>",7,[20,6])),Game.last.pool="debug",Game.UpgradesByPool.debug.push(Game.last),this.achievements.push(new Game.Upgrade("Unshackled Purity","Purification is <b>no longer limited by caps</b>; however, increasing purity past the cap will require an increased amount of purification power. <br>The decay rate increase from purity increase <b>-25%</b>.<q>One of the strongest antidotes that has been found; it can cure all known diseases.</q>",111111e11,[4,1,custImg])),Game.last.pool="prestige",Game.Upgrades["Unshackled Purity"].parents=[Game.Upgrades["Unshackled flavor"],Game.Upgrades["Unshackled berrylium"],Game.Upgrades["Unshackled blueberrylium"],Game.Upgrades["Unshackled chalcedhoney"],Game.Upgrades["Unshackled buttergold"],Game.Upgrades["Unshackled sugarmuck"],Game.Upgrades["Unshackled jetmint"],Game.Upgrades["Unshackled cherrysilver"],Game.Upgrades["Unshackled hazelrald"],Game.Upgrades["Unshackled mooncandy"],Game.Upgrades["Unshackled astrofudge"],Game.Upgrades["Unshackled alabascream"],Game.Upgrades["Unshackled iridyum"],Game.Upgrades["Unshackled glucosmium"],Game.Upgrades["Unshackled glimmeringue"]],Game.PrestigeUpgrades.push(Game.Upgrades["Unshackled Purity"]),Game.last.posY=195,Game.last.posX=750,this.achievements.push(new Game.Upgrade("Unshackled Elder Pledge","Makes Elder Pledge's purification <b>twice</b> as strong, and reduces the cooldown by <b>25%</b>.<q>Your pledge to the grandmas is stronger than ever before.</q>",256e14,[1,1,custImg])),Game.last.pool="prestige",Game.Upgrades["Unshackled Elder Pledge"].parents=[Game.Upgrades["Unshackled Purity"]],Game.PrestigeUpgrades.push(Game.Upgrades["Unshackled Elder Pledge"]),Game.last.posY=195,Game.last.posX=610,this.achievements.push(new Game.Upgrade("Uranium rolling pins","The Elder Pledge halts decay for <b>3</b> times longer on use.<q>Radiation, my superpower!</q>",9e14,[5,1,custImg])),Game.last.pool="prestige",Game.Upgrades["Uranium rolling pins"].parents=[Game.Upgrades["Cat ladies"]],Game.PrestigeUpgrades.push(Game.Upgrades["Uranium rolling pins"]),Game.last.posY=-740,Game.last.posX=800,this.achievements.push(new Game.Upgrade("Sparkling wonder","The <b>Shimmering Veil</b> has a <b>10%</b> chance to be revived to full health on collapse.<q>Just within reach, yet at what cost?</q>",15e14,[23,34])),Game.last.pool="prestige",Game.Upgrades["Sparkling wonder"].parents=[Game.Upgrades["Glittering edge"]],Game.PrestigeUpgrades.push(Game.Upgrades["Sparkling wonder"]),Game.last.posY=662,Game.last.posX=-622,this.achievements.push(new Game.Upgrade("Withering prices","Your upgrades are <b>0.1%</b> cheaper for every <b>x0.5</b> CpS multiplier from your decay.",666,[3,3,custImg])),Game.last.pool="prestige",Game.Upgrades["Withering prices"].parents=[Game.Upgrades["Starter kit"]],Game.PrestigeUpgrades.push(Game.Upgrades["Withering prices"]),Game.last.posY=-300,Game.last.posX=-390,this.achievements.push(new Game.Upgrade("Caramelized luxury","Sugar lumps ripen <b>4 hours</b> sooner.<q>The caramelization process causes the sugar molecules to change states, giving it a strong, deep aroma.</q>",1e15,[28,27])),this.achievements.push(new Game.Upgrade("Meaty disgust","Sugar lumps ripen <b>2 hours</b> sooner.<q>The presence of decay causes the sugar molecules growing within to fold in on itself, creating an entangled conglomeration that breeds agony.</q>",1e27,[28,17])),this.achievements.push(new Game.Upgrade("High-fructose sugar lumps","Sugar lumps ripen <b>1 hour</b> sooner.<q>Despite how obviously unhealthy, it is undoubtly, very delicious.</q>",1e45,[28,14])),this.achievements.push(new Game.Upgrade("Rainy day lumps","Mature sugar lumps are <b>5 times</b> less likely to botch.<q>Just in case of hunger.</q>",1e63,[29,15])),eval("Game.clickLump="+Game.clickLump.toString().replace("var amount=choose([0,1]);",'var amount=randomFloor(0.5 + Game.Has("Rainy day lumps") * 0.4);')),addLoc("This sugar lump is mature and will be ripe in <b>%1</b>.<br>You may <b>click it to harvest it now</b>, but there is a <b>%2% chance you won't get anything</b>."),eval("Game.lumpTooltip="+Game.lumpTooltip.toString().replace('loc("This sugar lump is mature and will be ripe in <b>%1</b>.<br>You may <b>click it to harvest it now</b>, but there is a <b>50% chance you won\'t get anything</b>.",Game.sayTime(((Game.lumpRipeAge-age)/1000+1)*Game.fps,-1));',"loc(\"This sugar lump is mature and will be ripe in <b>%1</b>.<br>You may <b>click it to harvest it now</b>, but there is a <b>%2% chance you won't get anything</b>.\",[Game.sayTime(((Game.lumpRipeAge-age)/1000+1)*Game.fps,-1), 50 - Game.Has('Rainy day lumps') * 40]);")),eval("Game.Upgrade.prototype.getPrice="+Game.Upgrade.prototype.getPrice.toString().replace("price*=0.95",'{ price*=0.95; } if (Game.Has("Withering prices")) { price *= Math.pow(0.999, Math.log2(Math.max(1 / decay.gen, 1))); }')),Game.Upgrades["Golden sugar"].order=350045,Game.Upgrades.Cursedor.order=253.0042,Game.Upgrades["Cursedor [inactive]"].order=14e3,Game.Upgrades["Cursedor [active]"].order=14e3,Game.Upgrades["The ultimate cookie"].order=9999999999,Game.Upgrades["Purity vaccines"].order=1,Game.Upgrades["Unshackled Purity"].order=770,Game.Upgrades["Unshackled Elder Pledge"].order=771,Game.Upgrades["Uranium rolling pins"].order=275,Game.Upgrades["Sparkling wonder"].order=283,Game.Upgrades["Withering prices"].order=287,Game.Upgrades["Caramelized luxury"].order=350045,Game.Upgrades["Meaty disgust"].order=350045,Game.Upgrades["High-fructose sugar lumps"].order=350045,Game.Upgrades["Rainy day lumps"].order=350045,LocalizeUpgradesAndAchievs()},this.checkAchievements=function(){Game.cookiesEarned>=1e9&&Game.Unlock("Golden sugar"),Game.cookiesEarned>=1e15&&Game.Unlock("Caramelized luxury"),Game.AchievementsOwned>=400&&Game.Unlock("Meaty disgust"),Game.AchievementsOwned>=500&&Game.Unlock("High-fructose sugar lumps"),Game.HasAchiev("Sugar sugar")&&Game.Unlock("Rainy day lumps"),Game.Has("Cursedor")&&Game.Unlock("Cursedor [inactive]"),Game.AchievementsOwned>=622&&Game.Unlock("The ultimate cookie")},Game.ready?this.createAchievements():Game.registerHook("create",this.createAchievements),Game.registerHook("check",this.checkAchievements),Game.parseNewLumpUpgrades=function(){var e=36e5;Game.Has("Golden sugar")&&(Game.lumpMatureAge-=8*e,Game.lumpRipeAge-=8*e),Game.Has("Caramelized luxury")&&(Game.lumpMatureAge-=4*e,Game.lumpRipeAge-=4*e),Game.Has("Meaty disgust")&&(Game.lumpMatureAge-=2*e,Game.lumpRipeAge-=2*e),Game.Has("High-fructose sugar lumps")&&(Game.lumpMatureAge-=1*e,Game.lumpRipeAge-=1*e)},eval("Game.computeLumpTimes="+Game.computeLumpTimes.toString().replace("ipeAge/=2000;}","ipeAge/=2000;} Game.parseNewLumpUpgrades();")),decay.CursedorUses=0,decay.cursedorThresholdMap={"click frenzy":[6e4,2.5],"cursed finger":[5e3,3],"blood frenzy":[66666,6],"sugar frenzy":[1e4,10],"sugar blessing":[1e4,3],"building special":[1e5,5],"cookie storm drop":[150,15],blab:[25e5,1.25],"cookie storm":[1e4,8],clot:[6666,6],ruin:[6666,6],"everything must go":[200,25],"Nasty goblins":[1e3,1e3],"Haggler's misery":[1e3,1e3],"Crafty pixies":[2500,250],"Haggler's luck":[2500,250],"free sugar lump":[25e5,1.5],"dragon harvest":[3e5,2.5],dragonflight:[111111,11],frenzy:[7500,7.5],"multiply cookies":[7500,7.5],failure:[100,100]},decay.getCursedorEffAdd=function(e,a){return a<decay.cursedorThresholdMap[e][0]?0:randomFloor(Math.log(a/decay.cursedorThresholdMap[e][0])/Math.log(decay.cursedorThresholdMap[e][1]))},Game.registerHook("click",(function(){if(Game.Has("Cursedor [inactive]")){decay.CursedorUses++,Math.seedrandom(Game.seed+"/"+decay.CursedorUses);var e=[];for(let a in decay.cursedorThresholdMap)for(let t=0;t<decay.getCursedorEffAdd(a,3*Game.cookieClicks);t++)e.push(a);if(e.length>0)var a=choose(e);else a="failure";if("building special"==a&&Game.BuildingsOwned<10&&(a="failure"),"click frenzy"==a&&Game.hasBuff("Dragonflight")&&(a="failure"),"failure"!=a)new Game.shimmer("golden").force=a,Game.Popup('<div style="font-size:80%;">'+loc("Successful click! Click count reset.")+"</div>",Game.mouseX,Game.mouseY);else Game.Popup('<div style="font-size:80%;">'+loc("Failed due to not enough clicks! Click count reset.")+"</div>",Game.mouseX,Game.mouseY);Game.cookieClicks=0,Math.seedrandom()}})),allValues("init completion")},save:function(){let e=kaizoCookiesVer+"/";for(let a of this.achievements)e+=a.unlocked,e+=a.bought;e+="/";for(let a=0;a<20;a++)e+=decay.mults[a],e+=",";e+=decay.gen,e+="/"+decay.halt+","+decay.haltOvertime+","+decay.bankedPurification+"/",e+=Game.pledgeT+","+Game.pledgeC,e+="/"+Game.veilHP+",",Game.Has("Shimmering veil")&&(Game.veilOn()?e+="on":Game.veilOff()?e+="off":Game.veilBroken()&&(e+="broken")),e+=",",e+=Game.veilRestoreC+","+Game.veilPreviouslyCollapsed+"/";for(let a in decay.prefs.preventNotifs)e+=decay.prefs.preventNotifs[a];e+="/",e+="h,"+decay.momentum,e+="/"+decay.CursedorUses+"/";for(let a in decay.times)e+=decay.times[a],e+=",";e=e.slice(0,e.length-1)+"/";for(let a in decay.prefs)"preventNotifs"!=a&&(e+=decay.prefs[a],e+=",");return e=e.slice(0,e.length-1),e},load:function(e){if(console.log("Kaizo Cookies loaded. Save string: "+e),"v"==(e=e.split("/"))[0][0]){getVer(e[0]);for(let a=0;a<e[1].length;a+=2)isv(e[1][a])&&(this.achievements[a/2].unlocked=Number(e[1][a])),isv(e[1][a+1])&&(this.achievements[a/2].bought=Number(e[1][a+1]));var a=e[2].split(",");for(let e in a)isv(a[e])&&(decay.mults[e]=parseFloat(a[e]));allValues("load; upgrades and decay basic"),isv(a[20])&&(decay.gen=parseFloat(a[20])),isv((a=e[3].split(","))[0])&&(decay.halt=parseFloat(a[0])),isv(a[1])&&(decay.haltOvertime=parseFloat(a[1])),isv(a[2])&&(decay.bankedPurification=parseFloat(a[2])),isv((a=e[4].split(","))[0])?Game.pledgeT=parseFloat(a[0]):Game.pledgeT=0,isv(a[1])&&(Game.pledgeC=parseFloat(a[1])),Game.pledgeT>0||Game.pledgeC>0?Game.Upgrades["Elder Pledge"].bought=1:Game.Upgrades["Elder Pledge"].bought=0,a=e[5].split(","),allValues("load; pledge and halt"),isv(a[0])&&(Game.veilHP=parseFloat(a[0])),Game.Has("Shimmering veil")&&(Game.Logic(),"on"==a[1]?(Game.Upgrades["Shimmering veil [off]"].earn(),Game.Lock("Shimmering veil [on]"),Game.Unlock("Shimmering veil [on]"),Game.Lock("Shimmering veil [broken]")):"off"==a[1]?(Game.Upgrades["Shimmering veil [on]"].earn(),Game.Lock("Shimmering veil [off]"),Game.Unlock("Shimmering veil [off]"),Game.Upgrades["Shimmering veil [broken]"].unlocked=0):"broken"==a[1]?(Game.Lock("Shimmering veil [on]"),Game.Lock("Shimmering veil [off]"),Game.Upgrades["Shimmering veil [broken]"].earn()):(Game.Upgrades["Shimmering veil [on]"].earn(),Game.Lock("Shimmering veil [off]"),Game.Unlock("Shimmering veil [off]"),Game.Upgrades["Shimmering veil [broken]"].unlocked=0,console.log("veil: something went wrong"))),isv(a[2])&&(Game.veilRestoreC=parseFloat(a[2])),isv(a[3])&&(Game.veilPreviouslyCollapsed=Boolean(a[3])),allValues("load; veil");var t=0;a=e[6];for(let e in decay.prefs.preventNotifs)isv(a[t])&&(decay.prefs.preventNotifs[e]=parseInt(a[t])),t++;isv((a=e[7].split(","))[1])&&(decay.momentum=parseFloat(a[1])),isv(e[8])&&(decay.CursedorUses=parseInt(e[8])),a=e[9].split(","),t=0;for(let e in decay.times)isv(a[t])&&(decay.times[e]=parseInt(a[t])),t++;a=e[10].split(","),t=0;for(let e in decay.prefs)isv(a[t])&&"preventNotifs"!=e&&(decay.prefs[e]=parseInt(a[t])),"preventNotifs"!=e&&t++}else{e=e[0];for(let a=0;a<this.achievements.length;a++)this.achievements[a].unlocked=Number(e[2*a]),this.achievements[a].bought=Number(e[2*a+1])}Game.storeToRefresh=1,allValues("load completion")}});
